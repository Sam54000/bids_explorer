<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>bids_explorer.architecture API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}@media (prefers-color-scheme:dark){pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#49483e}.pdoc-code{background:#272822; color:#f8f8f2}.pdoc-code .c{color:#75715e}.pdoc-code .err{color:#960050; background-color:#1e0010}.pdoc-code .esc{color:#f8f8f2}.pdoc-code .g{color:#f8f8f2}.pdoc-code .k{color:#66d9ef}.pdoc-code .l{color:#ae81ff}.pdoc-code .n{color:#f8f8f2}.pdoc-code .o{color:#f92672}.pdoc-code .x{color:#f8f8f2}.pdoc-code .p{color:#f8f8f2}.pdoc-code .ch{color:#75715e}.pdoc-code .cm{color:#75715e}.pdoc-code .cp{color:#75715e}.pdoc-code .cpf{color:#75715e}.pdoc-code .c1{color:#75715e}.pdoc-code .cs{color:#75715e}.pdoc-code .gd{color:#f92672}.pdoc-code .ge{color:#f8f8f2; font-style:italic}.pdoc-code .gr{color:#f8f8f2}.pdoc-code .gh{color:#f8f8f2}.pdoc-code .gi{color:#a6e22e}.pdoc-code .go{color:#66d9ef}.pdoc-code .gp{color:#f92672; font-weight:bold}.pdoc-code .gs{color:#f8f8f2; font-weight:bold}.pdoc-code .gu{color:#75715e}.pdoc-code .gt{color:#f8f8f2}.pdoc-code .kc{color:#66d9ef}.pdoc-code .kd{color:#66d9ef}.pdoc-code .kn{color:#f92672}.pdoc-code .kp{color:#66d9ef}.pdoc-code .kr{color:#66d9ef}.pdoc-code .kt{color:#66d9ef}.pdoc-code .ld{color:#e6db74}.pdoc-code .m{color:#ae81ff}.pdoc-code .s{color:#e6db74}.pdoc-code .na{color:#a6e22e}.pdoc-code .nb{color:#f8f8f2}.pdoc-code .nc{color:#a6e22e}.pdoc-code .no{color:#66d9ef}.pdoc-code .nd{color:#a6e22e}.pdoc-code .ni{color:#f8f8f2}.pdoc-code .ne{color:#a6e22e}.pdoc-code .nf{color:#a6e22e}.pdoc-code .nl{color:#f8f8f2}.pdoc-code .nn{color:#f8f8f2}.pdoc-code .nx{color:#a6e22e}.pdoc-code .py{color:#f8f8f2}.pdoc-code .nt{color:#f92672}.pdoc-code .nv{color:#f8f8f2}.pdoc-code .ow{color:#f92672}.pdoc-code .w{color:#f8f8f2}.pdoc-code .mb{color:#ae81ff}.pdoc-code .mf{color:#ae81ff}.pdoc-code .mh{color:#ae81ff}.pdoc-code .mi{color:#ae81ff}.pdoc-code .mo{color:#ae81ff}.pdoc-code .sa{color:#e6db74}.pdoc-code .sb{color:#e6db74}.pdoc-code .sc{color:#e6db74}.pdoc-code .dl{color:#e6db74}.pdoc-code .sd{color:#e6db74}.pdoc-code .s2{color:#e6db74}.pdoc-code .se{color:#ae81ff}.pdoc-code .sh{color:#e6db74}.pdoc-code .si{color:#e6db74}.pdoc-code .sx{color:#e6db74}.pdoc-code .sr{color:#e6db74}.pdoc-code .s1{color:#e6db74}.pdoc-code .ss{color:#e6db74}.pdoc-code .bp{color:#f8f8f2}.pdoc-code .fm{color:#a6e22e}.pdoc-code .vc{color:#f8f8f2}.pdoc-code .vg{color:#f8f8f2}.pdoc-code .vi{color:#f8f8f2}.pdoc-code .vm{color:#f8f8f2}}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}@media (prefers-color-scheme:dark){:root{--pdoc-background:#212529;}.pdoc{--text:#f7f7f7;--muted:#9d9d9d;--link:#58a6ff;--link-hover:#3989ff;--code:#333;--active:#555;--accent:#343434;--accent2:#555;--nav-hover:rgba(0, 0, 0, 0.1);--name:#77C1FF;--def:#0cdd0c;--annotation:#00c037;}}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../bids_explorer.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;bids_explorer</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#BidsArchitecture">BidsArchitecture</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BidsArchitecture.__init__">BidsArchitecture</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.database">database</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.errors">errors</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.subjects">subjects</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.sessions">sessions</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.datatypes">datatypes</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.tasks">tasks</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.runs">runs</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.acquisitions">acquisitions</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.recordings">recordings</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.descriptions">descriptions</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.suffixes">suffixes</a>
                        </li>
                        <li>
                                <a class="variable" href="#BidsArchitecture.extensions">extensions</a>
                        </li>
                        <li>
                                <a class="function" href="#BidsArchitecture.create_database">create_database</a>
                        </li>
                        <li>
                                <a class="function" href="#BidsArchitecture.print_errors_log">print_errors_log</a>
                        </li>
                        <li>
                                <a class="function" href="#BidsArchitecture.select">select</a>
                        </li>
                        <li>
                                <a class="function" href="#BidsArchitecture.remove">remove</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../bids_explorer.html">bids_explorer</a><wbr>.architecture    </h1>

                        <div class="docstring"><p>Main bids_explorer object.</p>

<p>This module contains the <code><a href="#BidsArchitecture">BidsArchitecture</a></code> class, which represents the
structure of a BIDS dataset. The class provides methods to query and interact
with the dataset, allowing users to select specific files based on various
criteria (subjects, sessions, datatypes, tasks, runs, etc.). It is designed
for read-only operations and does not modify the underlying dataset structure.</p>
</div>

                        <input id="mod-architecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-architecture-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;Main bids_explorer object.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="sd">This module contains the `BidsArchitecture` class, which represents the</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="sd">structure of a BIDS dataset. The class provides methods to query and interact</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">with the dataset, allowing users to select specific files based on various</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="sd">criteria (subjects, sessions, datatypes, tasks, runs, etc.). It is designed</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="sd">for read-only operations and does not modify the underlying dataset structure.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a><span class="kn">from</span> <span class="nn">bids_explorer.architecture.architecture</span> <span class="kn">import</span> <span class="n">BidsArchitecture</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="BidsArchitecture">
                            <input id="BidsArchitecture-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">BidsArchitecture</span><wbr>(<span class="base">bids_explorer.architecture.mixins.BidsArchitectureMixin</span>):

                <label class="view-source-button" for="BidsArchitecture-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture-24"><a href="#BidsArchitecture-24"><span class="linenos"> 24</span></a><span class="k">class</span> <span class="nc">BidsArchitecture</span><span class="p">(</span><span class="n">BidsArchitectureMixin</span><span class="p">):</span>
</span><span id="BidsArchitecture-25"><a href="#BidsArchitecture-25"><span class="linenos"> 25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main class for handling BIDS directory structure.</span>
</span><span id="BidsArchitecture-26"><a href="#BidsArchitecture-26"><span class="linenos"> 26</span></a>
</span><span id="BidsArchitecture-27"><a href="#BidsArchitecture-27"><span class="linenos"> 27</span></a><span class="sd">    Args:</span>
</span><span id="BidsArchitecture-28"><a href="#BidsArchitecture-28"><span class="linenos"> 28</span></a><span class="sd">        root: Optional root path to BIDS directory.</span>
</span><span id="BidsArchitecture-29"><a href="#BidsArchitecture-29"><span class="linenos"> 29</span></a>
</span><span id="BidsArchitecture-30"><a href="#BidsArchitecture-30"><span class="linenos"> 30</span></a><span class="sd">    Attributes:</span>
</span><span id="BidsArchitecture-31"><a href="#BidsArchitecture-31"><span class="linenos"> 31</span></a><span class="sd">        root (Optional[Path]):</span>
</span><span id="BidsArchitecture-32"><a href="#BidsArchitecture-32"><span class="linenos"> 32</span></a><span class="sd">            Path to the BIDS directory root, or None if not set.</span>
</span><span id="BidsArchitecture-33"><a href="#BidsArchitecture-33"><span class="linenos"> 33</span></a><span class="sd">        database (pd.DataFrame):</span>
</span><span id="BidsArchitecture-34"><a href="#BidsArchitecture-34"><span class="linenos"> 34</span></a><span class="sd">            DataFrame containing all BIDS files and their metadata.</span>
</span><span id="BidsArchitecture-35"><a href="#BidsArchitecture-35"><span class="linenos"> 35</span></a><span class="sd">        errors (List[Dict[str, Any]]):</span>
</span><span id="BidsArchitecture-36"><a href="#BidsArchitecture-36"><span class="linenos"> 36</span></a><span class="sd">            List of validation errors found during database creation.</span>
</span><span id="BidsArchitecture-37"><a href="#BidsArchitecture-37"><span class="linenos"> 37</span></a><span class="sd">        subjects (List[str]):</span>
</span><span id="BidsArchitecture-38"><a href="#BidsArchitecture-38"><span class="linenos"> 38</span></a><span class="sd">            List of subjects IDs present in the instance.</span>
</span><span id="BidsArchitecture-39"><a href="#BidsArchitecture-39"><span class="linenos"> 39</span></a><span class="sd">        sessions (List[str]):</span>
</span><span id="BidsArchitecture-40"><a href="#BidsArchitecture-40"><span class="linenos"> 40</span></a><span class="sd">            List of session IDs present in the instance.</span>
</span><span id="BidsArchitecture-41"><a href="#BidsArchitecture-41"><span class="linenos"> 41</span></a><span class="sd">        datatypes (List[str]):</span>
</span><span id="BidsArchitecture-42"><a href="#BidsArchitecture-42"><span class="linenos"> 42</span></a><span class="sd">            List of datatypes present in the dataset.</span>
</span><span id="BidsArchitecture-43"><a href="#BidsArchitecture-43"><span class="linenos"> 43</span></a><span class="sd">        tasks (List[str]):</span>
</span><span id="BidsArchitecture-44"><a href="#BidsArchitecture-44"><span class="linenos"> 44</span></a><span class="sd">            List of task names present in the dataset.</span>
</span><span id="BidsArchitecture-45"><a href="#BidsArchitecture-45"><span class="linenos"> 45</span></a><span class="sd">        runs (List[str]):</span>
</span><span id="BidsArchitecture-46"><a href="#BidsArchitecture-46"><span class="linenos"> 46</span></a><span class="sd">            List of run numbers present in the dataset.</span>
</span><span id="BidsArchitecture-47"><a href="#BidsArchitecture-47"><span class="linenos"> 47</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-48"><a href="#BidsArchitecture-48"><span class="linenos"> 48</span></a>
</span><span id="BidsArchitecture-49"><a href="#BidsArchitecture-49"><span class="linenos"> 49</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># noqa: D107</span>
</span><span id="BidsArchitecture-50"><a href="#BidsArchitecture-50"><span class="linenos"> 50</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-51"><a href="#BidsArchitecture-51"><span class="linenos"> 51</span></a>        <span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-52"><a href="#BidsArchitecture-52"><span class="linenos"> 52</span></a>        <span class="n">subject</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-53"><a href="#BidsArchitecture-53"><span class="linenos"> 53</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-54"><a href="#BidsArchitecture-54"><span class="linenos"> 54</span></a>        <span class="n">datatype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-55"><a href="#BidsArchitecture-55"><span class="linenos"> 55</span></a>        <span class="n">task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-56"><a href="#BidsArchitecture-56"><span class="linenos"> 56</span></a>        <span class="n">run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-57"><a href="#BidsArchitecture-57"><span class="linenos"> 57</span></a>        <span class="n">acquisition</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-58"><a href="#BidsArchitecture-58"><span class="linenos"> 58</span></a>        <span class="n">recording</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-59"><a href="#BidsArchitecture-59"><span class="linenos"> 59</span></a>        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-60"><a href="#BidsArchitecture-60"><span class="linenos"> 60</span></a>        <span class="n">suffix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-61"><a href="#BidsArchitecture-61"><span class="linenos"> 61</span></a>        <span class="n">extension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-62"><a href="#BidsArchitecture-62"><span class="linenos"> 62</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-63"><a href="#BidsArchitecture-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="k">if</span> <span class="n">root</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="BidsArchitecture-64"><a href="#BidsArchitecture-64"><span class="linenos"> 64</span></a>        <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
</span><span id="BidsArchitecture-65"><a href="#BidsArchitecture-65"><span class="linenos"> 65</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_path_handler</span> <span class="o">=</span> <span class="n">BidsQuery</span><span class="p">(</span>
</span><span id="BidsArchitecture-66"><a href="#BidsArchitecture-66"><span class="linenos"> 66</span></a>                <span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
</span><span id="BidsArchitecture-67"><a href="#BidsArchitecture-67"><span class="linenos"> 67</span></a>                <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
</span><span id="BidsArchitecture-68"><a href="#BidsArchitecture-68"><span class="linenos"> 68</span></a>                <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
</span><span id="BidsArchitecture-69"><a href="#BidsArchitecture-69"><span class="linenos"> 69</span></a>                <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">,</span>
</span><span id="BidsArchitecture-70"><a href="#BidsArchitecture-70"><span class="linenos"> 70</span></a>                <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
</span><span id="BidsArchitecture-71"><a href="#BidsArchitecture-71"><span class="linenos"> 71</span></a>                <span class="n">run</span><span class="o">=</span><span class="n">run</span><span class="p">,</span>
</span><span id="BidsArchitecture-72"><a href="#BidsArchitecture-72"><span class="linenos"> 72</span></a>                <span class="n">acquisition</span><span class="o">=</span><span class="n">acquisition</span><span class="p">,</span>
</span><span id="BidsArchitecture-73"><a href="#BidsArchitecture-73"><span class="linenos"> 73</span></a>                <span class="n">recording</span><span class="o">=</span><span class="n">recording</span><span class="p">,</span>
</span><span id="BidsArchitecture-74"><a href="#BidsArchitecture-74"><span class="linenos"> 74</span></a>                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
</span><span id="BidsArchitecture-75"><a href="#BidsArchitecture-75"><span class="linenos"> 75</span></a>                <span class="n">suffix</span><span class="o">=</span><span class="n">suffix</span><span class="p">,</span>
</span><span id="BidsArchitecture-76"><a href="#BidsArchitecture-76"><span class="linenos"> 76</span></a>                <span class="n">extension</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span>
</span><span id="BidsArchitecture-77"><a href="#BidsArchitecture-77"><span class="linenos"> 77</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture-78"><a href="#BidsArchitecture-78"><span class="linenos"> 78</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_database</span><span class="p">()</span>
</span><span id="BidsArchitecture-79"><a href="#BidsArchitecture-79"><span class="linenos"> 79</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-80"><a href="#BidsArchitecture-80"><span class="linenos"> 80</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture-81"><a href="#BidsArchitecture-81"><span class="linenos"> 81</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture-82"><a href="#BidsArchitecture-82"><span class="linenos"> 82</span></a>
</span><span id="BidsArchitecture-83"><a href="#BidsArchitecture-83"><span class="linenos"> 83</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-84"><a href="#BidsArchitecture-84"><span class="linenos"> 84</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">):</span>
</span><span id="BidsArchitecture-85"><a href="#BidsArchitecture-85"><span class="linenos"> 85</span></a>            <span class="k">return</span> <span class="p">(</span>
</span><span id="BidsArchitecture-86"><a href="#BidsArchitecture-86"><span class="linenos"> 86</span></a>                <span class="sa">f</span><span class="s2">&quot;BidsArchitecture: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">)</span><span class="si">}</span><span class="s2"> files, &quot;</span>
</span><span id="BidsArchitecture-87"><a href="#BidsArchitecture-87"><span class="linenos"> 87</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_errors</span><span class="p">)</span><span class="si">}</span><span class="s2"> errors, &quot;</span>
</span><span id="BidsArchitecture-88"><a href="#BidsArchitecture-88"><span class="linenos"> 88</span></a>                <span class="sa">f</span><span class="s2">&quot;subjects: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="BidsArchitecture-89"><a href="#BidsArchitecture-89"><span class="linenos"> 89</span></a>                <span class="sa">f</span><span class="s2">&quot;sessions: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s1">&#39;session&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="BidsArchitecture-90"><a href="#BidsArchitecture-90"><span class="linenos"> 90</span></a>                <span class="sa">f</span><span class="s2">&quot;datatypes: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s1">&#39;datatype&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="BidsArchitecture-91"><a href="#BidsArchitecture-91"><span class="linenos"> 91</span></a>                <span class="sa">f</span><span class="s2">&quot;recordings: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s1">&#39;recording&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="BidsArchitecture-92"><a href="#BidsArchitecture-92"><span class="linenos"> 92</span></a>                <span class="sa">f</span><span class="s2">&quot;tasks: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BidsArchitecture-93"><a href="#BidsArchitecture-93"><span class="linenos"> 93</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture-94"><a href="#BidsArchitecture-94"><span class="linenos"> 94</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-95"><a href="#BidsArchitecture-95"><span class="linenos"> 95</span></a>            <span class="n">empty_repr</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="BidsArchitecture-96"><a href="#BidsArchitecture-96"><span class="linenos"> 96</span></a>                <span class="s2">&quot;BidsArchitecture: 0 files, &quot;</span>
</span><span id="BidsArchitecture-97"><a href="#BidsArchitecture-97"><span class="linenos"> 97</span></a>                <span class="s2">&quot;0 errors, &quot;</span>
</span><span id="BidsArchitecture-98"><a href="#BidsArchitecture-98"><span class="linenos"> 98</span></a>                <span class="s2">&quot;subjects: 0, &quot;</span>
</span><span id="BidsArchitecture-99"><a href="#BidsArchitecture-99"><span class="linenos"> 99</span></a>                <span class="s2">&quot;sessions: 0, &quot;</span>
</span><span id="BidsArchitecture-100"><a href="#BidsArchitecture-100"><span class="linenos">100</span></a>                <span class="s2">&quot;datatypes: 0, &quot;</span>
</span><span id="BidsArchitecture-101"><a href="#BidsArchitecture-101"><span class="linenos">101</span></a>                <span class="s2">&quot;recordings: 0, &quot;</span>
</span><span id="BidsArchitecture-102"><a href="#BidsArchitecture-102"><span class="linenos">102</span></a>                <span class="s2">&quot;tasks: 0&quot;</span>
</span><span id="BidsArchitecture-103"><a href="#BidsArchitecture-103"><span class="linenos">103</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture-104"><a href="#BidsArchitecture-104"><span class="linenos">104</span></a>            <span class="k">return</span> <span class="n">empty_repr</span>
</span><span id="BidsArchitecture-105"><a href="#BidsArchitecture-105"><span class="linenos">105</span></a>
</span><span id="BidsArchitecture-106"><a href="#BidsArchitecture-106"><span class="linenos">106</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-107"><a href="#BidsArchitecture-107"><span class="linenos">107</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span><span id="BidsArchitecture-108"><a href="#BidsArchitecture-108"><span class="linenos">108</span></a>
</span><span id="BidsArchitecture-109"><a href="#BidsArchitecture-109"><span class="linenos">109</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-110"><a href="#BidsArchitecture-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">)</span>
</span><span id="BidsArchitecture-111"><a href="#BidsArchitecture-111"><span class="linenos">111</span></a>
</span><span id="BidsArchitecture-112"><a href="#BidsArchitecture-112"><span class="linenos">112</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-113"><a href="#BidsArchitecture-113"><span class="linenos">113</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="BidsArchitecture-114"><a href="#BidsArchitecture-114"><span class="linenos">114</span></a>
</span><span id="BidsArchitecture-115"><a href="#BidsArchitecture-115"><span class="linenos">115</span></a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-116"><a href="#BidsArchitecture-116"><span class="linenos">116</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Setting items is not supported&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-117"><a href="#BidsArchitecture-117"><span class="linenos">117</span></a>
</span><span id="BidsArchitecture-118"><a href="#BidsArchitecture-118"><span class="linenos">118</span></a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
</span><span id="BidsArchitecture-119"><a href="#BidsArchitecture-119"><span class="linenos">119</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over rows in the database.&quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-120"><a href="#BidsArchitecture-120"><span class="linenos">120</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
</span><span id="BidsArchitecture-121"><a href="#BidsArchitecture-121"><span class="linenos">121</span></a>
</span><span id="BidsArchitecture-122"><a href="#BidsArchitecture-122"><span class="linenos">122</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-123"><a href="#BidsArchitecture-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-124"><a href="#BidsArchitecture-124"><span class="linenos">124</span></a>        <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-125"><a href="#BidsArchitecture-125"><span class="linenos">125</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-126"><a href="#BidsArchitecture-126"><span class="linenos">126</span></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">prepare_for_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-127"><a href="#BidsArchitecture-127"><span class="linenos">127</span></a>        <span class="n">non_duplicates</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span><span id="BidsArchitecture-128"><a href="#BidsArchitecture-128"><span class="linenos">128</span></a>        <span class="n">combined_db</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
</span><span id="BidsArchitecture-129"><a href="#BidsArchitecture-129"><span class="linenos">129</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">non_duplicates</span><span class="p">]]</span>
</span><span id="BidsArchitecture-130"><a href="#BidsArchitecture-130"><span class="linenos">130</span></a>        <span class="p">)</span>
</span><span id="BidsArchitecture-131"><a href="#BidsArchitecture-131"><span class="linenos">131</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">BidsArchitecture</span><span class="p">()</span>
</span><span id="BidsArchitecture-132"><a href="#BidsArchitecture-132"><span class="linenos">132</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="n">combined_db</span>
</span><span id="BidsArchitecture-133"><a href="#BidsArchitecture-133"><span class="linenos">133</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">merge_error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-134"><a href="#BidsArchitecture-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span><span id="BidsArchitecture-135"><a href="#BidsArchitecture-135"><span class="linenos">135</span></a>
</span><span id="BidsArchitecture-136"><a href="#BidsArchitecture-136"><span class="linenos">136</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-137"><a href="#BidsArchitecture-137"><span class="linenos">137</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-138"><a href="#BidsArchitecture-138"><span class="linenos">138</span></a>        <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-139"><a href="#BidsArchitecture-139"><span class="linenos">139</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-140"><a href="#BidsArchitecture-140"><span class="linenos">140</span></a>        <span class="n">indices_other</span> <span class="o">=</span> <span class="n">prepare_for_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-141"><a href="#BidsArchitecture-141"><span class="linenos">141</span></a>        <span class="n">remaining_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">indices_other</span><span class="p">)</span>
</span><span id="BidsArchitecture-142"><a href="#BidsArchitecture-142"><span class="linenos">142</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">BidsArchitecture</span><span class="p">()</span>
</span><span id="BidsArchitecture-143"><a href="#BidsArchitecture-143"><span class="linenos">143</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">remaining_indices</span><span class="p">]</span>
</span><span id="BidsArchitecture-144"><a href="#BidsArchitecture-144"><span class="linenos">144</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">merge_error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-145"><a href="#BidsArchitecture-145"><span class="linenos">145</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span><span id="BidsArchitecture-146"><a href="#BidsArchitecture-146"><span class="linenos">146</span></a>
</span><span id="BidsArchitecture-147"><a href="#BidsArchitecture-147"><span class="linenos">147</span></a>    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span>  <span class="c1"># noqa: D105</span>
</span><span id="BidsArchitecture-148"><a href="#BidsArchitecture-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-149"><a href="#BidsArchitecture-149"><span class="linenos">149</span></a>        <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-150"><a href="#BidsArchitecture-150"><span class="linenos">150</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-151"><a href="#BidsArchitecture-151"><span class="linenos">151</span></a>        <span class="n">indices_other</span> <span class="o">=</span> <span class="n">prepare_for_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-152"><a href="#BidsArchitecture-152"><span class="linenos">152</span></a>        <span class="n">common_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">indices_other</span><span class="p">)</span>
</span><span id="BidsArchitecture-153"><a href="#BidsArchitecture-153"><span class="linenos">153</span></a>
</span><span id="BidsArchitecture-154"><a href="#BidsArchitecture-154"><span class="linenos">154</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">BidsArchitecture</span><span class="p">()</span>
</span><span id="BidsArchitecture-155"><a href="#BidsArchitecture-155"><span class="linenos">155</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">common_indices</span><span class="p">]</span>
</span><span id="BidsArchitecture-156"><a href="#BidsArchitecture-156"><span class="linenos">156</span></a>        <span class="n">new_instance</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">merge_error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="BidsArchitecture-157"><a href="#BidsArchitecture-157"><span class="linenos">157</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span><span id="BidsArchitecture-158"><a href="#BidsArchitecture-158"><span class="linenos">158</span></a>
</span><span id="BidsArchitecture-159"><a href="#BidsArchitecture-159"><span class="linenos">159</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-160"><a href="#BidsArchitecture-160"><span class="linenos">160</span></a>    <span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="BidsArchitecture-161"><a href="#BidsArchitecture-161"><span class="linenos">161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the BIDS dataset as a DataFrame.</span>
</span><span id="BidsArchitecture-162"><a href="#BidsArchitecture-162"><span class="linenos">162</span></a>
</span><span id="BidsArchitecture-163"><a href="#BidsArchitecture-163"><span class="linenos">163</span></a><span class="sd">        This DataFrame represents the entire BIDS dataset with indexed files.</span>
</span><span id="BidsArchitecture-164"><a href="#BidsArchitecture-164"><span class="linenos">164</span></a><span class="sd">        Each row represents a single file, with columns containing:</span>
</span><span id="BidsArchitecture-165"><a href="#BidsArchitecture-165"><span class="linenos">165</span></a><span class="sd">        - BIDS entities (subject, session, datatype, task, run, etc.)</span>
</span><span id="BidsArchitecture-166"><a href="#BidsArchitecture-166"><span class="linenos">166</span></a><span class="sd">        - Full file path</span>
</span><span id="BidsArchitecture-167"><a href="#BidsArchitecture-167"><span class="linenos">167</span></a><span class="sd">        - UNIX metadata (atime, mtime, ctime)</span>
</span><span id="BidsArchitecture-168"><a href="#BidsArchitecture-168"><span class="linenos">168</span></a>
</span><span id="BidsArchitecture-169"><a href="#BidsArchitecture-169"><span class="linenos">169</span></a><span class="sd">        Rows are indexed by the file&#39;s inode number, which uniquely identifies</span>
</span><span id="BidsArchitecture-170"><a href="#BidsArchitecture-170"><span class="linenos">170</span></a><span class="sd">        each file in the filesystem.</span>
</span><span id="BidsArchitecture-171"><a href="#BidsArchitecture-171"><span class="linenos">171</span></a>
</span><span id="BidsArchitecture-172"><a href="#BidsArchitecture-172"><span class="linenos">172</span></a><span class="sd">        This DataFrame serves as the core representation of the BIDS dataset</span>
</span><span id="BidsArchitecture-173"><a href="#BidsArchitecture-173"><span class="linenos">173</span></a><span class="sd">        and is used for all operations.</span>
</span><span id="BidsArchitecture-174"><a href="#BidsArchitecture-174"><span class="linenos">174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-175"><a href="#BidsArchitecture-175"><span class="linenos">175</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">):</span>
</span><span id="BidsArchitecture-176"><a href="#BidsArchitecture-176"><span class="linenos">176</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span>
</span><span id="BidsArchitecture-177"><a href="#BidsArchitecture-177"><span class="linenos">177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-178"><a href="#BidsArchitecture-178"><span class="linenos">178</span></a>            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture-179"><a href="#BidsArchitecture-179"><span class="linenos">179</span></a>
</span><span id="BidsArchitecture-180"><a href="#BidsArchitecture-180"><span class="linenos">180</span></a>    <span class="nd">@database</span><span class="o">.</span><span class="n">setter</span>
</span><span id="BidsArchitecture-181"><a href="#BidsArchitecture-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-182"><a href="#BidsArchitecture-182"><span class="linenos">182</span></a>        <span class="n">valid_db</span> <span class="o">=</span> <span class="n">all_columns_valid</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BidsArchitecture-183"><a href="#BidsArchitecture-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_db</span><span class="p">:</span>
</span><span id="BidsArchitecture-184"><a href="#BidsArchitecture-184"><span class="linenos">184</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid or missing columns in database&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-185"><a href="#BidsArchitecture-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="BidsArchitecture-186"><a href="#BidsArchitecture-186"><span class="linenos">186</span></a>
</span><span id="BidsArchitecture-187"><a href="#BidsArchitecture-187"><span class="linenos">187</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-188"><a href="#BidsArchitecture-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">errors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="BidsArchitecture-189"><a href="#BidsArchitecture-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the error log as a DataFrame.</span>
</span><span id="BidsArchitecture-190"><a href="#BidsArchitecture-190"><span class="linenos">190</span></a>
</span><span id="BidsArchitecture-191"><a href="#BidsArchitecture-191"><span class="linenos">191</span></a><span class="sd">        This DataFrame contains information about files that failed validation</span>
</span><span id="BidsArchitecture-192"><a href="#BidsArchitecture-192"><span class="linenos">192</span></a><span class="sd">        during the database creation process.</span>
</span><span id="BidsArchitecture-193"><a href="#BidsArchitecture-193"><span class="linenos">193</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-194"><a href="#BidsArchitecture-194"><span class="linenos">194</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_errors&quot;</span><span class="p">):</span>
</span><span id="BidsArchitecture-195"><a href="#BidsArchitecture-195"><span class="linenos">195</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span>
</span><span id="BidsArchitecture-196"><a href="#BidsArchitecture-196"><span class="linenos">196</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-197"><a href="#BidsArchitecture-197"><span class="linenos">197</span></a>            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture-198"><a href="#BidsArchitecture-198"><span class="linenos">198</span></a>
</span><span id="BidsArchitecture-199"><a href="#BidsArchitecture-199"><span class="linenos">199</span></a>    <span class="nd">@errors</span><span class="o">.</span><span class="n">setter</span>
</span><span id="BidsArchitecture-200"><a href="#BidsArchitecture-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-201"><a href="#BidsArchitecture-201"><span class="linenos">201</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="BidsArchitecture-202"><a href="#BidsArchitecture-202"><span class="linenos">202</span></a>
</span><span id="BidsArchitecture-203"><a href="#BidsArchitecture-203"><span class="linenos">203</span></a>    <span class="k">def</span> <span class="nf">_get_unique_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-204"><a href="#BidsArchitecture-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get unique values from a database column.</span>
</span><span id="BidsArchitecture-205"><a href="#BidsArchitecture-205"><span class="linenos">205</span></a>
</span><span id="BidsArchitecture-206"><a href="#BidsArchitecture-206"><span class="linenos">206</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-207"><a href="#BidsArchitecture-207"><span class="linenos">207</span></a><span class="sd">            column: Name of the column to get unique values from.</span>
</span><span id="BidsArchitecture-208"><a href="#BidsArchitecture-208"><span class="linenos">208</span></a>
</span><span id="BidsArchitecture-209"><a href="#BidsArchitecture-209"><span class="linenos">209</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-210"><a href="#BidsArchitecture-210"><span class="linenos">210</span></a><span class="sd">            List of unique values, excluding None, empty strings, and NaN</span>
</span><span id="BidsArchitecture-211"><a href="#BidsArchitecture-211"><span class="linenos">211</span></a><span class="sd">            values.</span>
</span><span id="BidsArchitecture-212"><a href="#BidsArchitecture-212"><span class="linenos">212</span></a><span class="sd">            Values are converted to strings and sorted.</span>
</span><span id="BidsArchitecture-213"><a href="#BidsArchitecture-213"><span class="linenos">213</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-214"><a href="#BidsArchitecture-214"><span class="linenos">214</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="BidsArchitecture-215"><a href="#BidsArchitecture-215"><span class="linenos">215</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="BidsArchitecture-216"><a href="#BidsArchitecture-216"><span class="linenos">216</span></a>
</span><span id="BidsArchitecture-217"><a href="#BidsArchitecture-217"><span class="linenos">217</span></a>        <span class="c1"># Get unique values and convert to list for filtering</span>
</span><span id="BidsArchitecture-218"><a href="#BidsArchitecture-218"><span class="linenos">218</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</span><span id="BidsArchitecture-219"><a href="#BidsArchitecture-219"><span class="linenos">219</span></a>
</span><span id="BidsArchitecture-220"><a href="#BidsArchitecture-220"><span class="linenos">220</span></a>        <span class="c1"># Filter out None, empty strings, and NaN values</span>
</span><span id="BidsArchitecture-221"><a href="#BidsArchitecture-221"><span class="linenos">221</span></a>        <span class="n">value_list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="BidsArchitecture-222"><a href="#BidsArchitecture-222"><span class="linenos">222</span></a>            <span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>  <span class="c1"># Convert all values to strings</span>
</span><span id="BidsArchitecture-223"><a href="#BidsArchitecture-223"><span class="linenos">223</span></a>            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">values</span>
</span><span id="BidsArchitecture-224"><a href="#BidsArchitecture-224"><span class="linenos">224</span></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>  <span class="c1"># Handles both None and np.nan</span>
</span><span id="BidsArchitecture-225"><a href="#BidsArchitecture-225"><span class="linenos">225</span></a>            <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Handles empty strings and whitespace</span>
</span><span id="BidsArchitecture-226"><a href="#BidsArchitecture-226"><span class="linenos">226</span></a>        <span class="p">]</span>
</span><span id="BidsArchitecture-227"><a href="#BidsArchitecture-227"><span class="linenos">227</span></a>
</span><span id="BidsArchitecture-228"><a href="#BidsArchitecture-228"><span class="linenos">228</span></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span>
</span><span id="BidsArchitecture-229"><a href="#BidsArchitecture-229"><span class="linenos">229</span></a>
</span><span id="BidsArchitecture-230"><a href="#BidsArchitecture-230"><span class="linenos">230</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-231"><a href="#BidsArchitecture-231"><span class="linenos">231</span></a>    <span class="k">def</span> <span class="nf">subjects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-232"><a href="#BidsArchitecture-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique subjects present in the dataset.</span>
</span><span id="BidsArchitecture-233"><a href="#BidsArchitecture-233"><span class="linenos">233</span></a>
</span><span id="BidsArchitecture-234"><a href="#BidsArchitecture-234"><span class="linenos">234</span></a><span class="sd">        This list contains all the subject IDs found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-235"><a href="#BidsArchitecture-235"><span class="linenos">235</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-236"><a href="#BidsArchitecture-236"><span class="linenos">236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-237"><a href="#BidsArchitecture-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;subject&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-238"><a href="#BidsArchitecture-238"><span class="linenos">238</span></a>
</span><span id="BidsArchitecture-239"><a href="#BidsArchitecture-239"><span class="linenos">239</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-240"><a href="#BidsArchitecture-240"><span class="linenos">240</span></a>    <span class="k">def</span> <span class="nf">sessions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-241"><a href="#BidsArchitecture-241"><span class="linenos">241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique sessions present in the dataset.</span>
</span><span id="BidsArchitecture-242"><a href="#BidsArchitecture-242"><span class="linenos">242</span></a>
</span><span id="BidsArchitecture-243"><a href="#BidsArchitecture-243"><span class="linenos">243</span></a><span class="sd">        This list contains all the session IDs found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-244"><a href="#BidsArchitecture-244"><span class="linenos">244</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-245"><a href="#BidsArchitecture-245"><span class="linenos">245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-246"><a href="#BidsArchitecture-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-247"><a href="#BidsArchitecture-247"><span class="linenos">247</span></a>
</span><span id="BidsArchitecture-248"><a href="#BidsArchitecture-248"><span class="linenos">248</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-249"><a href="#BidsArchitecture-249"><span class="linenos">249</span></a>    <span class="k">def</span> <span class="nf">datatypes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-250"><a href="#BidsArchitecture-250"><span class="linenos">250</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique datatypes present in the dataset.</span>
</span><span id="BidsArchitecture-251"><a href="#BidsArchitecture-251"><span class="linenos">251</span></a>
</span><span id="BidsArchitecture-252"><a href="#BidsArchitecture-252"><span class="linenos">252</span></a><span class="sd">        This list contains all the datatypes found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-253"><a href="#BidsArchitecture-253"><span class="linenos">253</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-254"><a href="#BidsArchitecture-254"><span class="linenos">254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-255"><a href="#BidsArchitecture-255"><span class="linenos">255</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;datatype&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-256"><a href="#BidsArchitecture-256"><span class="linenos">256</span></a>
</span><span id="BidsArchitecture-257"><a href="#BidsArchitecture-257"><span class="linenos">257</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-258"><a href="#BidsArchitecture-258"><span class="linenos">258</span></a>    <span class="k">def</span> <span class="nf">tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-259"><a href="#BidsArchitecture-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique tasks present in the dataset.</span>
</span><span id="BidsArchitecture-260"><a href="#BidsArchitecture-260"><span class="linenos">260</span></a>
</span><span id="BidsArchitecture-261"><a href="#BidsArchitecture-261"><span class="linenos">261</span></a><span class="sd">        This list contains all the task names found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-262"><a href="#BidsArchitecture-262"><span class="linenos">262</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-263"><a href="#BidsArchitecture-263"><span class="linenos">263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-264"><a href="#BidsArchitecture-264"><span class="linenos">264</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-265"><a href="#BidsArchitecture-265"><span class="linenos">265</span></a>
</span><span id="BidsArchitecture-266"><a href="#BidsArchitecture-266"><span class="linenos">266</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-267"><a href="#BidsArchitecture-267"><span class="linenos">267</span></a>    <span class="k">def</span> <span class="nf">runs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-268"><a href="#BidsArchitecture-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique runs present in the dataset.</span>
</span><span id="BidsArchitecture-269"><a href="#BidsArchitecture-269"><span class="linenos">269</span></a>
</span><span id="BidsArchitecture-270"><a href="#BidsArchitecture-270"><span class="linenos">270</span></a><span class="sd">        This list contains all the run numbers found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-271"><a href="#BidsArchitecture-271"><span class="linenos">271</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-272"><a href="#BidsArchitecture-272"><span class="linenos">272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-273"><a href="#BidsArchitecture-273"><span class="linenos">273</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;run&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-274"><a href="#BidsArchitecture-274"><span class="linenos">274</span></a>
</span><span id="BidsArchitecture-275"><a href="#BidsArchitecture-275"><span class="linenos">275</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-276"><a href="#BidsArchitecture-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">acquisitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-277"><a href="#BidsArchitecture-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique acquisitions present in the dataset.</span>
</span><span id="BidsArchitecture-278"><a href="#BidsArchitecture-278"><span class="linenos">278</span></a>
</span><span id="BidsArchitecture-279"><a href="#BidsArchitecture-279"><span class="linenos">279</span></a><span class="sd">        This list contains all the acquisition names found in the BIDS dataset</span>
</span><span id="BidsArchitecture-280"><a href="#BidsArchitecture-280"><span class="linenos">280</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture-281"><a href="#BidsArchitecture-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-282"><a href="#BidsArchitecture-282"><span class="linenos">282</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;acquisition&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-283"><a href="#BidsArchitecture-283"><span class="linenos">283</span></a>
</span><span id="BidsArchitecture-284"><a href="#BidsArchitecture-284"><span class="linenos">284</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-285"><a href="#BidsArchitecture-285"><span class="linenos">285</span></a>    <span class="k">def</span> <span class="nf">recordings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-286"><a href="#BidsArchitecture-286"><span class="linenos">286</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique recordings present in the dataset.</span>
</span><span id="BidsArchitecture-287"><a href="#BidsArchitecture-287"><span class="linenos">287</span></a>
</span><span id="BidsArchitecture-288"><a href="#BidsArchitecture-288"><span class="linenos">288</span></a><span class="sd">        This list contains all the recording names found in the BIDS dataset</span>
</span><span id="BidsArchitecture-289"><a href="#BidsArchitecture-289"><span class="linenos">289</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture-290"><a href="#BidsArchitecture-290"><span class="linenos">290</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-291"><a href="#BidsArchitecture-291"><span class="linenos">291</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-292"><a href="#BidsArchitecture-292"><span class="linenos">292</span></a>
</span><span id="BidsArchitecture-293"><a href="#BidsArchitecture-293"><span class="linenos">293</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-294"><a href="#BidsArchitecture-294"><span class="linenos">294</span></a>    <span class="k">def</span> <span class="nf">descriptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-295"><a href="#BidsArchitecture-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique descriptions present in the dataset.</span>
</span><span id="BidsArchitecture-296"><a href="#BidsArchitecture-296"><span class="linenos">296</span></a>
</span><span id="BidsArchitecture-297"><a href="#BidsArchitecture-297"><span class="linenos">297</span></a><span class="sd">        This list contains all the description names found in the BIDS dataset</span>
</span><span id="BidsArchitecture-298"><a href="#BidsArchitecture-298"><span class="linenos">298</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture-299"><a href="#BidsArchitecture-299"><span class="linenos">299</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-300"><a href="#BidsArchitecture-300"><span class="linenos">300</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-301"><a href="#BidsArchitecture-301"><span class="linenos">301</span></a>
</span><span id="BidsArchitecture-302"><a href="#BidsArchitecture-302"><span class="linenos">302</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-303"><a href="#BidsArchitecture-303"><span class="linenos">303</span></a>    <span class="k">def</span> <span class="nf">suffixes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture-304"><a href="#BidsArchitecture-304"><span class="linenos">304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique suffixes present in the dataset.</span>
</span><span id="BidsArchitecture-305"><a href="#BidsArchitecture-305"><span class="linenos">305</span></a>
</span><span id="BidsArchitecture-306"><a href="#BidsArchitecture-306"><span class="linenos">306</span></a><span class="sd">        This list contains all the suffixes found in the BIDS dataset or</span>
</span><span id="BidsArchitecture-307"><a href="#BidsArchitecture-307"><span class="linenos">307</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture-308"><a href="#BidsArchitecture-308"><span class="linenos">308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-309"><a href="#BidsArchitecture-309"><span class="linenos">309</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;suffix&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-310"><a href="#BidsArchitecture-310"><span class="linenos">310</span></a>
</span><span id="BidsArchitecture-311"><a href="#BidsArchitecture-311"><span class="linenos">311</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture-312"><a href="#BidsArchitecture-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="nf">extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>  <span class="c1"># noqa: D102</span>
</span><span id="BidsArchitecture-313"><a href="#BidsArchitecture-313"><span class="linenos">313</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;extension&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-314"><a href="#BidsArchitecture-314"><span class="linenos">314</span></a>
</span><span id="BidsArchitecture-315"><a href="#BidsArchitecture-315"><span class="linenos">315</span></a>    <span class="k">def</span> <span class="nf">create_database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
</span><span id="BidsArchitecture-316"><a href="#BidsArchitecture-316"><span class="linenos">316</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scan filesystem and build DataFrame of matching files.</span>
</span><span id="BidsArchitecture-317"><a href="#BidsArchitecture-317"><span class="linenos">317</span></a>
</span><span id="BidsArchitecture-318"><a href="#BidsArchitecture-318"><span class="linenos">318</span></a><span class="sd">        Walks through the BIDS directory structure and creates two DataFrames:</span>
</span><span id="BidsArchitecture-319"><a href="#BidsArchitecture-319"><span class="linenos">319</span></a><span class="sd">        one for valid files and one for errors encountered during scanning.</span>
</span><span id="BidsArchitecture-320"><a href="#BidsArchitecture-320"><span class="linenos">320</span></a>
</span><span id="BidsArchitecture-321"><a href="#BidsArchitecture-321"><span class="linenos">321</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-322"><a href="#BidsArchitecture-322"><span class="linenos">322</span></a><span class="sd">            tuple[pd.DataFrame, pd.DataFrame]: Tuple containing</span>
</span><span id="BidsArchitecture-323"><a href="#BidsArchitecture-323"><span class="linenos">323</span></a><span class="sd">                                               (database, error_log)</span>
</span><span id="BidsArchitecture-324"><a href="#BidsArchitecture-324"><span class="linenos">324</span></a>
</span><span id="BidsArchitecture-325"><a href="#BidsArchitecture-325"><span class="linenos">325</span></a><span class="sd">        Raises:</span>
</span><span id="BidsArchitecture-326"><a href="#BidsArchitecture-326"><span class="linenos">326</span></a><span class="sd">            ValueError: If root directory is not set.</span>
</span><span id="BidsArchitecture-327"><a href="#BidsArchitecture-327"><span class="linenos">327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-328"><a href="#BidsArchitecture-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="BidsArchitecture-329"><a href="#BidsArchitecture-329"><span class="linenos">329</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Root directory not set&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-330"><a href="#BidsArchitecture-330"><span class="linenos">330</span></a>
</span><span id="BidsArchitecture-331"><a href="#BidsArchitecture-331"><span class="linenos">331</span></a>        <span class="n">database_keys</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="BidsArchitecture-332"><a href="#BidsArchitecture-332"><span class="linenos">332</span></a>            <span class="s2">&quot;inode&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-333"><a href="#BidsArchitecture-333"><span class="linenos">333</span></a>            <span class="s2">&quot;root&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-334"><a href="#BidsArchitecture-334"><span class="linenos">334</span></a>            <span class="s2">&quot;subject&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-335"><a href="#BidsArchitecture-335"><span class="linenos">335</span></a>            <span class="s2">&quot;session&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-336"><a href="#BidsArchitecture-336"><span class="linenos">336</span></a>            <span class="s2">&quot;datatype&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-337"><a href="#BidsArchitecture-337"><span class="linenos">337</span></a>            <span class="s2">&quot;task&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-338"><a href="#BidsArchitecture-338"><span class="linenos">338</span></a>            <span class="s2">&quot;run&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-339"><a href="#BidsArchitecture-339"><span class="linenos">339</span></a>            <span class="s2">&quot;acquisition&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-340"><a href="#BidsArchitecture-340"><span class="linenos">340</span></a>            <span class="s2">&quot;recording&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-341"><a href="#BidsArchitecture-341"><span class="linenos">341</span></a>            <span class="s2">&quot;description&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-342"><a href="#BidsArchitecture-342"><span class="linenos">342</span></a>            <span class="s2">&quot;suffix&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-343"><a href="#BidsArchitecture-343"><span class="linenos">343</span></a>            <span class="s2">&quot;extension&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-344"><a href="#BidsArchitecture-344"><span class="linenos">344</span></a>            <span class="s2">&quot;atime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-345"><a href="#BidsArchitecture-345"><span class="linenos">345</span></a>            <span class="s2">&quot;mtime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-346"><a href="#BidsArchitecture-346"><span class="linenos">346</span></a>            <span class="s2">&quot;ctime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-347"><a href="#BidsArchitecture-347"><span class="linenos">347</span></a>            <span class="s2">&quot;filename&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-348"><a href="#BidsArchitecture-348"><span class="linenos">348</span></a>        <span class="p">]</span>
</span><span id="BidsArchitecture-349"><a href="#BidsArchitecture-349"><span class="linenos">349</span></a>
</span><span id="BidsArchitecture-350"><a href="#BidsArchitecture-350"><span class="linenos">350</span></a>        <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">database_keys</span><span class="p">}</span>
</span><span id="BidsArchitecture-351"><a href="#BidsArchitecture-351"><span class="linenos">351</span></a>        <span class="n">error_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="BidsArchitecture-352"><a href="#BidsArchitecture-352"><span class="linenos">352</span></a>            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture-353"><a href="#BidsArchitecture-353"><span class="linenos">353</span></a>            <span class="s2">&quot;error_type&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture-354"><a href="#BidsArchitecture-354"><span class="linenos">354</span></a>            <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture-355"><a href="#BidsArchitecture-355"><span class="linenos">355</span></a>            <span class="s2">&quot;inode&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture-356"><a href="#BidsArchitecture-356"><span class="linenos">356</span></a>        <span class="p">}</span>
</span><span id="BidsArchitecture-357"><a href="#BidsArchitecture-357"><span class="linenos">357</span></a>
</span><span id="BidsArchitecture-358"><a href="#BidsArchitecture-358"><span class="linenos">358</span></a>        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_handler</span><span class="o">.</span><span class="n">generate</span><span class="p">():</span>
</span><span id="BidsArchitecture-359"><a href="#BidsArchitecture-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="BidsArchitecture-360"><a href="#BidsArchitecture-360"><span class="linenos">360</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-361"><a href="#BidsArchitecture-361"><span class="linenos">361</span></a>
</span><span id="BidsArchitecture-362"><a href="#BidsArchitecture-362"><span class="linenos">362</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="BidsArchitecture-363"><a href="#BidsArchitecture-363"><span class="linenos">363</span></a>                <span class="n">validate_bids_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture-364"><a href="#BidsArchitecture-364"><span class="linenos">364</span></a>                <span class="n">entities</span> <span class="o">=</span> <span class="n">parse_bids_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture-365"><a href="#BidsArchitecture-365"><span class="linenos">365</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_file_to_database</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="BidsArchitecture-366"><a href="#BidsArchitecture-366"><span class="linenos">366</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="BidsArchitecture-367"><a href="#BidsArchitecture-367"><span class="linenos">367</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_error_to_log</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">error_flags</span><span class="p">)</span>
</span><span id="BidsArchitecture-368"><a href="#BidsArchitecture-368"><span class="linenos">368</span></a>
</span><span id="BidsArchitecture-369"><a href="#BidsArchitecture-369"><span class="linenos">369</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dataframes</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">error_flags</span><span class="p">)</span>
</span><span id="BidsArchitecture-370"><a href="#BidsArchitecture-370"><span class="linenos">370</span></a>
</span><span id="BidsArchitecture-371"><a href="#BidsArchitecture-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">_add_file_to_database</span><span class="p">(</span>
</span><span id="BidsArchitecture-372"><a href="#BidsArchitecture-372"><span class="linenos">372</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>
</span><span id="BidsArchitecture-373"><a href="#BidsArchitecture-373"><span class="linenos">373</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-374"><a href="#BidsArchitecture-374"><span class="linenos">374</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add file information to database dictionary.</span>
</span><span id="BidsArchitecture-375"><a href="#BidsArchitecture-375"><span class="linenos">375</span></a>
</span><span id="BidsArchitecture-376"><a href="#BidsArchitecture-376"><span class="linenos">376</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-377"><a href="#BidsArchitecture-377"><span class="linenos">377</span></a><span class="sd">            file: Path object representing the file.</span>
</span><span id="BidsArchitecture-378"><a href="#BidsArchitecture-378"><span class="linenos">378</span></a><span class="sd">            entities: Dictionary containing parsed BIDS entities.</span>
</span><span id="BidsArchitecture-379"><a href="#BidsArchitecture-379"><span class="linenos">379</span></a><span class="sd">            data: Dictionary to store file information.</span>
</span><span id="BidsArchitecture-380"><a href="#BidsArchitecture-380"><span class="linenos">380</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-381"><a href="#BidsArchitecture-381"><span class="linenos">381</span></a>        <span class="c1"># Add root separately since it&#39;s not in entities</span>
</span><span id="BidsArchitecture-382"><a href="#BidsArchitecture-382"><span class="linenos">382</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</span><span id="BidsArchitecture-383"><a href="#BidsArchitecture-383"><span class="linenos">383</span></a>
</span><span id="BidsArchitecture-384"><a href="#BidsArchitecture-384"><span class="linenos">384</span></a>        <span class="c1"># Add all other entities</span>
</span><span id="BidsArchitecture-385"><a href="#BidsArchitecture-385"><span class="linenos">385</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="BidsArchitecture-386"><a href="#BidsArchitecture-386"><span class="linenos">386</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;atime&quot;</span><span class="p">,</span> <span class="s2">&quot;mtime&quot;</span><span class="p">,</span> <span class="s2">&quot;ctime&quot;</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">,</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="s2">&quot;inode&quot;</span><span class="p">]:</span>
</span><span id="BidsArchitecture-387"><a href="#BidsArchitecture-387"><span class="linenos">387</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-388"><a href="#BidsArchitecture-388"><span class="linenos">388</span></a>            <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</span><span id="BidsArchitecture-389"><a href="#BidsArchitecture-389"><span class="linenos">389</span></a>
</span><span id="BidsArchitecture-390"><a href="#BidsArchitecture-390"><span class="linenos">390</span></a>        <span class="n">file_stats</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span>
</span><span id="BidsArchitecture-391"><a href="#BidsArchitecture-391"><span class="linenos">391</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;inode&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">file_stats</span><span class="o">.</span><span class="n">st_ino</span><span class="p">))</span>
</span><span id="BidsArchitecture-392"><a href="#BidsArchitecture-392"><span class="linenos">392</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;atime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">file_stats</span><span class="o">.</span><span class="n">st_atime</span><span class="p">))</span>
</span><span id="BidsArchitecture-393"><a href="#BidsArchitecture-393"><span class="linenos">393</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mtime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">file_stats</span><span class="o">.</span><span class="n">st_mtime</span><span class="p">))</span>
</span><span id="BidsArchitecture-394"><a href="#BidsArchitecture-394"><span class="linenos">394</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ctime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">file_stats</span><span class="o">.</span><span class="n">st_ctime</span><span class="p">))</span>
</span><span id="BidsArchitecture-395"><a href="#BidsArchitecture-395"><span class="linenos">395</span></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture-396"><a href="#BidsArchitecture-396"><span class="linenos">396</span></a>
</span><span id="BidsArchitecture-397"><a href="#BidsArchitecture-397"><span class="linenos">397</span></a>    <span class="k">def</span> <span class="nf">_add_error_to_log</span><span class="p">(</span>
</span><span id="BidsArchitecture-398"><a href="#BidsArchitecture-398"><span class="linenos">398</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">error_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>
</span><span id="BidsArchitecture-399"><a href="#BidsArchitecture-399"><span class="linenos">399</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-400"><a href="#BidsArchitecture-400"><span class="linenos">400</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add error information to error log dictionary.</span>
</span><span id="BidsArchitecture-401"><a href="#BidsArchitecture-401"><span class="linenos">401</span></a>
</span><span id="BidsArchitecture-402"><a href="#BidsArchitecture-402"><span class="linenos">402</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-403"><a href="#BidsArchitecture-403"><span class="linenos">403</span></a><span class="sd">            file: Path object representing the problematic file.</span>
</span><span id="BidsArchitecture-404"><a href="#BidsArchitecture-404"><span class="linenos">404</span></a><span class="sd">            error: Exception that was raised.</span>
</span><span id="BidsArchitecture-405"><a href="#BidsArchitecture-405"><span class="linenos">405</span></a><span class="sd">            error_flags: Dictionary to store error information.</span>
</span><span id="BidsArchitecture-406"><a href="#BidsArchitecture-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-407"><a href="#BidsArchitecture-407"><span class="linenos">407</span></a>        <span class="n">error_flags</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture-408"><a href="#BidsArchitecture-408"><span class="linenos">408</span></a>        <span class="n">error_flags</span><span class="p">[</span><span class="s2">&quot;error_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="BidsArchitecture-409"><a href="#BidsArchitecture-409"><span class="linenos">409</span></a>        <span class="n">error_flags</span><span class="p">[</span><span class="s2">&quot;error_message&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
</span><span id="BidsArchitecture-410"><a href="#BidsArchitecture-410"><span class="linenos">410</span></a>        <span class="n">error_flags</span><span class="p">[</span><span class="s2">&quot;inode&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_ino</span><span class="p">)</span>
</span><span id="BidsArchitecture-411"><a href="#BidsArchitecture-411"><span class="linenos">411</span></a>
</span><span id="BidsArchitecture-412"><a href="#BidsArchitecture-412"><span class="linenos">412</span></a>    <span class="k">def</span> <span class="nf">_create_dataframes</span><span class="p">(</span>
</span><span id="BidsArchitecture-413"><a href="#BidsArchitecture-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span> <span class="n">error_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span>
</span><span id="BidsArchitecture-414"><a href="#BidsArchitecture-414"><span class="linenos">414</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
</span><span id="BidsArchitecture-415"><a href="#BidsArchitecture-415"><span class="linenos">415</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create DataFrames from collected data.</span>
</span><span id="BidsArchitecture-416"><a href="#BidsArchitecture-416"><span class="linenos">416</span></a>
</span><span id="BidsArchitecture-417"><a href="#BidsArchitecture-417"><span class="linenos">417</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-418"><a href="#BidsArchitecture-418"><span class="linenos">418</span></a><span class="sd">            data: Dictionary containing file information.</span>
</span><span id="BidsArchitecture-419"><a href="#BidsArchitecture-419"><span class="linenos">419</span></a><span class="sd">            error_flags: Dictionary containing error information.</span>
</span><span id="BidsArchitecture-420"><a href="#BidsArchitecture-420"><span class="linenos">420</span></a>
</span><span id="BidsArchitecture-421"><a href="#BidsArchitecture-421"><span class="linenos">421</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-422"><a href="#BidsArchitecture-422"><span class="linenos">422</span></a><span class="sd">            tuple[pd.DataFrame, pd.DataFrame]: Tuple containing</span>
</span><span id="BidsArchitecture-423"><a href="#BidsArchitecture-423"><span class="linenos">423</span></a><span class="sd">                                               (database, error_log).</span>
</span><span id="BidsArchitecture-424"><a href="#BidsArchitecture-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-425"><a href="#BidsArchitecture-425"><span class="linenos">425</span></a>        <span class="n">data_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="BidsArchitecture-426"><a href="#BidsArchitecture-426"><span class="linenos">426</span></a>            <span class="n">data</span><span class="p">,</span>
</span><span id="BidsArchitecture-427"><a href="#BidsArchitecture-427"><span class="linenos">427</span></a>            <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;inode&quot;</span><span class="p">],</span>
</span><span id="BidsArchitecture-428"><a href="#BidsArchitecture-428"><span class="linenos">428</span></a>            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;inode&quot;</span><span class="p">],</span>
</span><span id="BidsArchitecture-429"><a href="#BidsArchitecture-429"><span class="linenos">429</span></a>        <span class="p">)</span>
</span><span id="BidsArchitecture-430"><a href="#BidsArchitecture-430"><span class="linenos">430</span></a>        <span class="n">error_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="BidsArchitecture-431"><a href="#BidsArchitecture-431"><span class="linenos">431</span></a>            <span class="n">error_flags</span><span class="p">,</span>
</span><span id="BidsArchitecture-432"><a href="#BidsArchitecture-432"><span class="linenos">432</span></a>            <span class="n">index</span><span class="o">=</span><span class="n">error_flags</span><span class="p">[</span><span class="s2">&quot;inode&quot;</span><span class="p">],</span>
</span><span id="BidsArchitecture-433"><a href="#BidsArchitecture-433"><span class="linenos">433</span></a>            <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">error_flags</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;inode&quot;</span><span class="p">],</span>
</span><span id="BidsArchitecture-434"><a href="#BidsArchitecture-434"><span class="linenos">434</span></a>        <span class="p">)</span>
</span><span id="BidsArchitecture-435"><a href="#BidsArchitecture-435"><span class="linenos">435</span></a>        <span class="k">return</span> <span class="n">data_df</span><span class="p">,</span> <span class="n">error_df</span>
</span><span id="BidsArchitecture-436"><a href="#BidsArchitecture-436"><span class="linenos">436</span></a>
</span><span id="BidsArchitecture-437"><a href="#BidsArchitecture-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="nf">print_errors_log</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-438"><a href="#BidsArchitecture-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Print summary of errors encountered during database creation.</span>
</span><span id="BidsArchitecture-439"><a href="#BidsArchitecture-439"><span class="linenos">439</span></a>
</span><span id="BidsArchitecture-440"><a href="#BidsArchitecture-440"><span class="linenos">440</span></a><span class="sd">        Displays the number of files with errors and the types of errors</span>
</span><span id="BidsArchitecture-441"><a href="#BidsArchitecture-441"><span class="linenos">441</span></a><span class="sd">        encountered.</span>
</span><span id="BidsArchitecture-442"><a href="#BidsArchitecture-442"><span class="linenos">442</span></a><span class="sd">        If no errors were found, prints a confirmation message.</span>
</span><span id="BidsArchitecture-443"><a href="#BidsArchitecture-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-444"><a href="#BidsArchitecture-444"><span class="linenos">444</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="BidsArchitecture-445"><a href="#BidsArchitecture-445"><span class="linenos">445</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No errors found&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-446"><a href="#BidsArchitecture-446"><span class="linenos">446</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-447"><a href="#BidsArchitecture-447"><span class="linenos">447</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-448"><a href="#BidsArchitecture-448"><span class="linenos">448</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error types: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s1">&#39;error_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-449"><a href="#BidsArchitecture-449"><span class="linenos">449</span></a>
</span><span id="BidsArchitecture-450"><a href="#BidsArchitecture-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="nf">_get_range</span><span class="p">(</span>
</span><span id="BidsArchitecture-451"><a href="#BidsArchitecture-451"><span class="linenos">451</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-452"><a href="#BidsArchitecture-452"><span class="linenos">452</span></a>        <span class="n">dataframe_column</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
</span><span id="BidsArchitecture-453"><a href="#BidsArchitecture-453"><span class="linenos">453</span></a>        <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-454"><a href="#BidsArchitecture-454"><span class="linenos">454</span></a>        <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-455"><a href="#BidsArchitecture-455"><span class="linenos">455</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-456"><a href="#BidsArchitecture-456"><span class="linenos">456</span></a>        <span class="c1"># Validate input types</span>
</span><span id="BidsArchitecture-457"><a href="#BidsArchitecture-457"><span class="linenos">457</span></a>        <span class="n">valid_types</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
</span><span id="BidsArchitecture-458"><a href="#BidsArchitecture-458"><span class="linenos">458</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">valid_types</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="BidsArchitecture-459"><a href="#BidsArchitecture-459"><span class="linenos">459</span></a>            <span class="n">stop</span><span class="p">,</span> <span class="n">valid_types</span>
</span><span id="BidsArchitecture-460"><a href="#BidsArchitecture-460"><span class="linenos">460</span></a>        <span class="p">):</span>
</span><span id="BidsArchitecture-461"><a href="#BidsArchitecture-461"><span class="linenos">461</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="BidsArchitecture-462"><a href="#BidsArchitecture-462"><span class="linenos">462</span></a>                <span class="s2">&quot;Start and stop must be integers, strings, or None&quot;</span>
</span><span id="BidsArchitecture-463"><a href="#BidsArchitecture-463"><span class="linenos">463</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture-464"><a href="#BidsArchitecture-464"><span class="linenos">464</span></a>
</span><span id="BidsArchitecture-465"><a href="#BidsArchitecture-465"><span class="linenos">465</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BidsArchitecture-466"><a href="#BidsArchitecture-466"><span class="linenos">466</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="BidsArchitecture-467"><a href="#BidsArchitecture-467"><span class="linenos">467</span></a>
</span><span id="BidsArchitecture-468"><a href="#BidsArchitecture-468"><span class="linenos">468</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BidsArchitecture-469"><a href="#BidsArchitecture-469"><span class="linenos">469</span></a>            <span class="n">stop</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</span><span id="BidsArchitecture-470"><a href="#BidsArchitecture-470"><span class="linenos">470</span></a>
</span><span id="BidsArchitecture-471"><a href="#BidsArchitecture-471"><span class="linenos">471</span></a>        <span class="n">dataframe_column</span> <span class="o">=</span> <span class="n">dataframe_column</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</span><span id="BidsArchitecture-472"><a href="#BidsArchitecture-472"><span class="linenos">472</span></a>
</span><span id="BidsArchitecture-473"><a href="#BidsArchitecture-473"><span class="linenos">473</span></a>        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">start</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-474"><a href="#BidsArchitecture-474"><span class="linenos">474</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">)</span>
</span><span id="BidsArchitecture-475"><a href="#BidsArchitecture-475"><span class="linenos">475</span></a>
</span><span id="BidsArchitecture-476"><a href="#BidsArchitecture-476"><span class="linenos">476</span></a>        <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">stop</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-477"><a href="#BidsArchitecture-477"><span class="linenos">477</span></a>            <span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="BidsArchitecture-478"><a href="#BidsArchitecture-478"><span class="linenos">478</span></a>
</span><span id="BidsArchitecture-479"><a href="#BidsArchitecture-479"><span class="linenos">479</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">dataframe_column</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dataframe_column</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">)</span>
</span><span id="BidsArchitecture-480"><a href="#BidsArchitecture-480"><span class="linenos">480</span></a>
</span><span id="BidsArchitecture-481"><a href="#BidsArchitecture-481"><span class="linenos">481</span></a>    <span class="k">def</span> <span class="nf">_get_single_loc</span><span class="p">(</span>
</span><span id="BidsArchitecture-482"><a href="#BidsArchitecture-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">dataframe_column</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="BidsArchitecture-483"><a href="#BidsArchitecture-483"><span class="linenos">483</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-484"><a href="#BidsArchitecture-484"><span class="linenos">484</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
</span><span id="BidsArchitecture-485"><a href="#BidsArchitecture-485"><span class="linenos">485</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="BidsArchitecture-486"><a href="#BidsArchitecture-486"><span class="linenos">486</span></a>        <span class="n">locations_found</span> <span class="o">=</span> <span class="n">dataframe_column</span> <span class="o">==</span> <span class="n">value</span>
</span><span id="BidsArchitecture-487"><a href="#BidsArchitecture-487"><span class="linenos">487</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">locations_found</span><span class="p">):</span>
</span><span id="BidsArchitecture-488"><a href="#BidsArchitecture-488"><span class="linenos">488</span></a>            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;No location corresponding found in the database&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-489"><a href="#BidsArchitecture-489"><span class="linenos">489</span></a>            <span class="n">locations_found</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="ow">not</span> <span class="p">(</span><span class="n">s</span><span class="p">))</span>
</span><span id="BidsArchitecture-490"><a href="#BidsArchitecture-490"><span class="linenos">490</span></a>        <span class="k">return</span> <span class="n">locations_found</span>
</span><span id="BidsArchitecture-491"><a href="#BidsArchitecture-491"><span class="linenos">491</span></a>
</span><span id="BidsArchitecture-492"><a href="#BidsArchitecture-492"><span class="linenos">492</span></a>    <span class="k">def</span> <span class="nf">_is_numerical</span><span class="p">(</span>
</span><span id="BidsArchitecture-493"><a href="#BidsArchitecture-493"><span class="linenos">493</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">dataframe_column</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span>
</span><span id="BidsArchitecture-494"><a href="#BidsArchitecture-494"><span class="linenos">494</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-495"><a href="#BidsArchitecture-495"><span class="linenos">495</span></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">dataframe_column</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()))</span>
</span><span id="BidsArchitecture-496"><a href="#BidsArchitecture-496"><span class="linenos">496</span></a>
</span><span id="BidsArchitecture-497"><a href="#BidsArchitecture-497"><span class="linenos">497</span></a>    <span class="k">def</span> <span class="nf">_interpret_string</span><span class="p">(</span>
</span><span id="BidsArchitecture-498"><a href="#BidsArchitecture-498"><span class="linenos">498</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-499"><a href="#BidsArchitecture-499"><span class="linenos">499</span></a>        <span class="n">dataframe_column</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
</span><span id="BidsArchitecture-500"><a href="#BidsArchitecture-500"><span class="linenos">500</span></a>        <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BidsArchitecture-501"><a href="#BidsArchitecture-501"><span class="linenos">501</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-502"><a href="#BidsArchitecture-502"><span class="linenos">502</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Interpret string patterns for database filtering.</span>
</span><span id="BidsArchitecture-503"><a href="#BidsArchitecture-503"><span class="linenos">503</span></a>
</span><span id="BidsArchitecture-504"><a href="#BidsArchitecture-504"><span class="linenos">504</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-505"><a href="#BidsArchitecture-505"><span class="linenos">505</span></a><span class="sd">            dataframe_column: Series containing the column data to filter</span>
</span><span id="BidsArchitecture-506"><a href="#BidsArchitecture-506"><span class="linenos">506</span></a><span class="sd">            string: String pattern to interpret (e.g. &quot;1-5&quot; for range)</span>
</span><span id="BidsArchitecture-507"><a href="#BidsArchitecture-507"><span class="linenos">507</span></a>
</span><span id="BidsArchitecture-508"><a href="#BidsArchitecture-508"><span class="linenos">508</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-509"><a href="#BidsArchitecture-509"><span class="linenos">509</span></a><span class="sd">            pd.core.series.Series: Boolean mask for matching rows</span>
</span><span id="BidsArchitecture-510"><a href="#BidsArchitecture-510"><span class="linenos">510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-511"><a href="#BidsArchitecture-511"><span class="linenos">511</span></a>        <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
</span><span id="BidsArchitecture-512"><a href="#BidsArchitecture-512"><span class="linenos">512</span></a>            <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-513"><a href="#BidsArchitecture-513"><span class="linenos">513</span></a>            <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="BidsArchitecture-514"><a href="#BidsArchitecture-514"><span class="linenos">514</span></a>                <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="n">start</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">),</span>
</span><span id="BidsArchitecture-515"><a href="#BidsArchitecture-515"><span class="linenos">515</span></a>                <span class="p">(</span><span class="n">stop</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="n">stop</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">),</span>
</span><span id="BidsArchitecture-516"><a href="#BidsArchitecture-516"><span class="linenos">516</span></a>            <span class="p">]</span>
</span><span id="BidsArchitecture-517"><a href="#BidsArchitecture-517"><span class="linenos">517</span></a>
</span><span id="BidsArchitecture-518"><a href="#BidsArchitecture-518"><span class="linenos">518</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">conditions</span><span class="p">):</span>
</span><span id="BidsArchitecture-519"><a href="#BidsArchitecture-519"><span class="linenos">519</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="BidsArchitecture-520"><a href="#BidsArchitecture-520"><span class="linenos">520</span></a>                    <span class="s2">&quot;Input must be 2 digits separated by a `-` or &quot;</span>
</span><span id="BidsArchitecture-521"><a href="#BidsArchitecture-521"><span class="linenos">521</span></a>                    <span class="s2">&quot;1 digit and a wild card `*` separated by a `-`&quot;</span>
</span><span id="BidsArchitecture-522"><a href="#BidsArchitecture-522"><span class="linenos">522</span></a>                <span class="p">)</span>
</span><span id="BidsArchitecture-523"><a href="#BidsArchitecture-523"><span class="linenos">523</span></a>
</span><span id="BidsArchitecture-524"><a href="#BidsArchitecture-524"><span class="linenos">524</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_range</span><span class="p">(</span>
</span><span id="BidsArchitecture-525"><a href="#BidsArchitecture-525"><span class="linenos">525</span></a>                <span class="n">dataframe_column</span><span class="o">=</span><span class="n">dataframe_column</span><span class="p">,</span>
</span><span id="BidsArchitecture-526"><a href="#BidsArchitecture-526"><span class="linenos">526</span></a>                <span class="n">start</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="k">if</span> <span class="n">start</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-527"><a href="#BidsArchitecture-527"><span class="linenos">527</span></a>                <span class="n">stop</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span> <span class="k">if</span> <span class="n">stop</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-528"><a href="#BidsArchitecture-528"><span class="linenos">528</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture-529"><a href="#BidsArchitecture-529"><span class="linenos">529</span></a>
</span><span id="BidsArchitecture-530"><a href="#BidsArchitecture-530"><span class="linenos">530</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-531"><a href="#BidsArchitecture-531"><span class="linenos">531</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_single_loc</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
</span><span id="BidsArchitecture-532"><a href="#BidsArchitecture-532"><span class="linenos">532</span></a>
</span><span id="BidsArchitecture-533"><a href="#BidsArchitecture-533"><span class="linenos">533</span></a>    <span class="k">def</span> <span class="nf">_perform_selection</span><span class="p">(</span>
</span><span id="BidsArchitecture-534"><a href="#BidsArchitecture-534"><span class="linenos">534</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">dataframe_column</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="BidsArchitecture-535"><a href="#BidsArchitecture-535"><span class="linenos">535</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-536"><a href="#BidsArchitecture-536"><span class="linenos">536</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_numerical</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">):</span>
</span><span id="BidsArchitecture-537"><a href="#BidsArchitecture-537"><span class="linenos">537</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interpret_string</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="BidsArchitecture-538"><a href="#BidsArchitecture-538"><span class="linenos">538</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-539"><a href="#BidsArchitecture-539"><span class="linenos">539</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_single_loc</span><span class="p">(</span><span class="n">dataframe_column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="BidsArchitecture-540"><a href="#BidsArchitecture-540"><span class="linenos">540</span></a>
</span><span id="BidsArchitecture-541"><a href="#BidsArchitecture-541"><span class="linenos">541</span></a>    <span class="k">def</span> <span class="nf">_create_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
</span><span id="BidsArchitecture-542"><a href="#BidsArchitecture-542"><span class="linenos">542</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create boolean mask for filtering DataFrame.</span>
</span><span id="BidsArchitecture-543"><a href="#BidsArchitecture-543"><span class="linenos">543</span></a>
</span><span id="BidsArchitecture-544"><a href="#BidsArchitecture-544"><span class="linenos">544</span></a><span class="sd">        Creates an optimized boolean mask for filtering the database based on</span>
</span><span id="BidsArchitecture-545"><a href="#BidsArchitecture-545"><span class="linenos">545</span></a><span class="sd">        provided BIDS entities.</span>
</span><span id="BidsArchitecture-546"><a href="#BidsArchitecture-546"><span class="linenos">546</span></a>
</span><span id="BidsArchitecture-547"><a href="#BidsArchitecture-547"><span class="linenos">547</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-548"><a href="#BidsArchitecture-548"><span class="linenos">548</span></a><span class="sd">            **kwargs: BIDS entities to filter by</span>
</span><span id="BidsArchitecture-549"><a href="#BidsArchitecture-549"><span class="linenos">549</span></a><span class="sd">                      (e.g., subject=&#39;01&#39;, session=&#39;1&#39;).</span>
</span><span id="BidsArchitecture-550"><a href="#BidsArchitecture-550"><span class="linenos">550</span></a>
</span><span id="BidsArchitecture-551"><a href="#BidsArchitecture-551"><span class="linenos">551</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-552"><a href="#BidsArchitecture-552"><span class="linenos">552</span></a><span class="sd">            pd.Series: Boolean mask for filtering DataFrame.</span>
</span><span id="BidsArchitecture-553"><a href="#BidsArchitecture-553"><span class="linenos">553</span></a>
</span><span id="BidsArchitecture-554"><a href="#BidsArchitecture-554"><span class="linenos">554</span></a><span class="sd">        Raises:</span>
</span><span id="BidsArchitecture-555"><a href="#BidsArchitecture-555"><span class="linenos">555</span></a><span class="sd">            ValueError: If invalid selection keys are provided.</span>
</span><span id="BidsArchitecture-556"><a href="#BidsArchitecture-556"><span class="linenos">556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-557"><a href="#BidsArchitecture-557"><span class="linenos">557</span></a>        <span class="n">valid_keys</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="BidsArchitecture-558"><a href="#BidsArchitecture-558"><span class="linenos">558</span></a>            <span class="s2">&quot;subject&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-559"><a href="#BidsArchitecture-559"><span class="linenos">559</span></a>            <span class="s2">&quot;session&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-560"><a href="#BidsArchitecture-560"><span class="linenos">560</span></a>            <span class="s2">&quot;datatype&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-561"><a href="#BidsArchitecture-561"><span class="linenos">561</span></a>            <span class="s2">&quot;task&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-562"><a href="#BidsArchitecture-562"><span class="linenos">562</span></a>            <span class="s2">&quot;run&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-563"><a href="#BidsArchitecture-563"><span class="linenos">563</span></a>            <span class="s2">&quot;acquisition&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-564"><a href="#BidsArchitecture-564"><span class="linenos">564</span></a>            <span class="s2">&quot;recording&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-565"><a href="#BidsArchitecture-565"><span class="linenos">565</span></a>            <span class="s2">&quot;description&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-566"><a href="#BidsArchitecture-566"><span class="linenos">566</span></a>            <span class="s2">&quot;suffix&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-567"><a href="#BidsArchitecture-567"><span class="linenos">567</span></a>            <span class="s2">&quot;extension&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture-568"><a href="#BidsArchitecture-568"><span class="linenos">568</span></a>        <span class="p">}</span>
</span><span id="BidsArchitecture-569"><a href="#BidsArchitecture-569"><span class="linenos">569</span></a>
</span><span id="BidsArchitecture-570"><a href="#BidsArchitecture-570"><span class="linenos">570</span></a>        <span class="n">invalid_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="n">valid_keys</span>
</span><span id="BidsArchitecture-571"><a href="#BidsArchitecture-571"><span class="linenos">571</span></a>        <span class="k">if</span> <span class="n">invalid_keys</span><span class="p">:</span>
</span><span id="BidsArchitecture-572"><a href="#BidsArchitecture-572"><span class="linenos">572</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid selection keys: </span><span class="si">{</span><span class="n">invalid_keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-573"><a href="#BidsArchitecture-573"><span class="linenos">573</span></a>
</span><span id="BidsArchitecture-574"><a href="#BidsArchitecture-574"><span class="linenos">574</span></a>        <span class="n">valid_inodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span><span id="BidsArchitecture-575"><a href="#BidsArchitecture-575"><span class="linenos">575</span></a>
</span><span id="BidsArchitecture-576"><a href="#BidsArchitecture-576"><span class="linenos">576</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="BidsArchitecture-577"><a href="#BidsArchitecture-577"><span class="linenos">577</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture-578"><a href="#BidsArchitecture-578"><span class="linenos">578</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-579"><a href="#BidsArchitecture-579"><span class="linenos">579</span></a>
</span><span id="BidsArchitecture-580"><a href="#BidsArchitecture-580"><span class="linenos">580</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-581"><a href="#BidsArchitecture-581"><span class="linenos">581</span></a>                <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span><span id="BidsArchitecture-582"><a href="#BidsArchitecture-582"><span class="linenos">582</span></a>
</span><span id="BidsArchitecture-583"><a href="#BidsArchitecture-583"><span class="linenos">583</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="BidsArchitecture-584"><a href="#BidsArchitecture-584"><span class="linenos">584</span></a>                <span class="n">matching_inodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="BidsArchitecture-585"><a href="#BidsArchitecture-585"><span class="linenos">585</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">value</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
</span><span id="BidsArchitecture-586"><a href="#BidsArchitecture-586"><span class="linenos">586</span></a>                <span class="p">)</span>
</span><span id="BidsArchitecture-587"><a href="#BidsArchitecture-587"><span class="linenos">587</span></a>                <span class="n">valid_inodes</span> <span class="o">&amp;=</span> <span class="n">matching_inodes</span>
</span><span id="BidsArchitecture-588"><a href="#BidsArchitecture-588"><span class="linenos">588</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-589"><a href="#BidsArchitecture-589"><span class="linenos">589</span></a>
</span><span id="BidsArchitecture-590"><a href="#BidsArchitecture-590"><span class="linenos">590</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="BidsArchitecture-591"><a href="#BidsArchitecture-591"><span class="linenos">591</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-592"><a href="#BidsArchitecture-592"><span class="linenos">592</span></a>
</span><span id="BidsArchitecture-593"><a href="#BidsArchitecture-593"><span class="linenos">593</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="BidsArchitecture-594"><a href="#BidsArchitecture-594"><span class="linenos">594</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span id="BidsArchitecture-595"><a href="#BidsArchitecture-595"><span class="linenos">595</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture-596"><a href="#BidsArchitecture-596"><span class="linenos">596</span></a>
</span><span id="BidsArchitecture-597"><a href="#BidsArchitecture-597"><span class="linenos">597</span></a>            <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="BidsArchitecture-598"><a href="#BidsArchitecture-598"><span class="linenos">598</span></a>
</span><span id="BidsArchitecture-599"><a href="#BidsArchitecture-599"><span class="linenos">599</span></a>            <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_numerical</span><span class="p">(</span><span class="n">col</span><span class="p">):</span>
</span><span id="BidsArchitecture-600"><a href="#BidsArchitecture-600"><span class="linenos">600</span></a>                <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-601"><a href="#BidsArchitecture-601"><span class="linenos">601</span></a>                <span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="BidsArchitecture-602"><a href="#BidsArchitecture-602"><span class="linenos">602</span></a>                    <span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="n">start</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">),</span>
</span><span id="BidsArchitecture-603"><a href="#BidsArchitecture-603"><span class="linenos">603</span></a>                    <span class="p">(</span><span class="n">stop</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="n">stop</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">),</span>
</span><span id="BidsArchitecture-604"><a href="#BidsArchitecture-604"><span class="linenos">604</span></a>                <span class="p">]</span>
</span><span id="BidsArchitecture-605"><a href="#BidsArchitecture-605"><span class="linenos">605</span></a>
</span><span id="BidsArchitecture-606"><a href="#BidsArchitecture-606"><span class="linenos">606</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">conditions</span><span class="p">):</span>
</span><span id="BidsArchitecture-607"><a href="#BidsArchitecture-607"><span class="linenos">607</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="BidsArchitecture-608"><a href="#BidsArchitecture-608"><span class="linenos">608</span></a>                        <span class="s2">&quot;Input must be digits separated by a `-` or &quot;</span>
</span><span id="BidsArchitecture-609"><a href="#BidsArchitecture-609"><span class="linenos">609</span></a>                        <span class="s2">&quot;digits and a wild card `*` separated by a `-`&quot;</span>
</span><span id="BidsArchitecture-610"><a href="#BidsArchitecture-610"><span class="linenos">610</span></a>                    <span class="p">)</span>
</span><span id="BidsArchitecture-611"><a href="#BidsArchitecture-611"><span class="linenos">611</span></a>
</span><span id="BidsArchitecture-612"><a href="#BidsArchitecture-612"><span class="linenos">612</span></a>                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">conditions</span><span class="p">):</span>
</span><span id="BidsArchitecture-613"><a href="#BidsArchitecture-613"><span class="linenos">613</span></a>                    <span class="n">col_numeric</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture-614"><a href="#BidsArchitecture-614"><span class="linenos">614</span></a>                    <span class="n">start_val</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="BidsArchitecture-615"><a href="#BidsArchitecture-615"><span class="linenos">615</span></a>                        <span class="nb">int</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="k">if</span> <span class="n">start</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="n">col_numeric</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</span><span id="BidsArchitecture-616"><a href="#BidsArchitecture-616"><span class="linenos">616</span></a>                    <span class="p">)</span>
</span><span id="BidsArchitecture-617"><a href="#BidsArchitecture-617"><span class="linenos">617</span></a>                    <span class="n">stop_val</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="BidsArchitecture-618"><a href="#BidsArchitecture-618"><span class="linenos">618</span></a>                        <span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span> <span class="k">if</span> <span class="n">stop</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="n">col_numeric</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</span><span id="BidsArchitecture-619"><a href="#BidsArchitecture-619"><span class="linenos">619</span></a>                    <span class="p">)</span>
</span><span id="BidsArchitecture-620"><a href="#BidsArchitecture-620"><span class="linenos">620</span></a>                    <span class="n">range_mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">col_numeric</span> <span class="o">&gt;=</span> <span class="n">start_val</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span>
</span><span id="BidsArchitecture-621"><a href="#BidsArchitecture-621"><span class="linenos">621</span></a>                        <span class="n">col_numeric</span> <span class="o">&lt;=</span> <span class="n">stop_val</span>
</span><span id="BidsArchitecture-622"><a href="#BidsArchitecture-622"><span class="linenos">622</span></a>                    <span class="p">)</span>
</span><span id="BidsArchitecture-623"><a href="#BidsArchitecture-623"><span class="linenos">623</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">range_mask</span><span class="p">)</span>
</span><span id="BidsArchitecture-624"><a href="#BidsArchitecture-624"><span class="linenos">624</span></a>                    <span class="n">matching_inodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="n">range_mask</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span><span id="BidsArchitecture-625"><a href="#BidsArchitecture-625"><span class="linenos">625</span></a>                    <span class="n">valid_inodes</span> <span class="o">&amp;=</span> <span class="n">matching_inodes</span>
</span><span id="BidsArchitecture-626"><a href="#BidsArchitecture-626"><span class="linenos">626</span></a>
</span><span id="BidsArchitecture-627"><a href="#BidsArchitecture-627"><span class="linenos">627</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-628"><a href="#BidsArchitecture-628"><span class="linenos">628</span></a>                <span class="n">matching_inodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">[</span><span class="n">col</span> <span class="o">==</span> <span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span><span id="BidsArchitecture-629"><a href="#BidsArchitecture-629"><span class="linenos">629</span></a>                <span class="n">valid_inodes</span> <span class="o">&amp;=</span> <span class="n">matching_inodes</span>
</span><span id="BidsArchitecture-630"><a href="#BidsArchitecture-630"><span class="linenos">630</span></a>
</span><span id="BidsArchitecture-631"><a href="#BidsArchitecture-631"><span class="linenos">631</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">valid_inodes</span><span class="p">)</span>
</span><span id="BidsArchitecture-632"><a href="#BidsArchitecture-632"><span class="linenos">632</span></a>
</span><span id="BidsArchitecture-633"><a href="#BidsArchitecture-633"><span class="linenos">633</span></a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span>
</span><span id="BidsArchitecture-634"><a href="#BidsArchitecture-634"><span class="linenos">634</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture-635"><a href="#BidsArchitecture-635"><span class="linenos">635</span></a>        <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BidsArchitecture-636"><a href="#BidsArchitecture-636"><span class="linenos">636</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture-637"><a href="#BidsArchitecture-637"><span class="linenos">637</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-638"><a href="#BidsArchitecture-638"><span class="linenos">638</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Select files from database based on BIDS entities.</span>
</span><span id="BidsArchitecture-639"><a href="#BidsArchitecture-639"><span class="linenos">639</span></a>
</span><span id="BidsArchitecture-640"><a href="#BidsArchitecture-640"><span class="linenos">640</span></a><span class="sd">        It select files from the database based on the BIDS entities provided.</span>
</span><span id="BidsArchitecture-641"><a href="#BidsArchitecture-641"><span class="linenos">641</span></a><span class="sd">        The selection can be done with wildcards or ranges.</span>
</span><span id="BidsArchitecture-642"><a href="#BidsArchitecture-642"><span class="linenos">642</span></a>
</span><span id="BidsArchitecture-643"><a href="#BidsArchitecture-643"><span class="linenos">643</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-644"><a href="#BidsArchitecture-644"><span class="linenos">644</span></a><span class="sd">            inplace: If True, modify the current instance. If False,</span>
</span><span id="BidsArchitecture-645"><a href="#BidsArchitecture-645"><span class="linenos">645</span></a><span class="sd">                     return a new instance.</span>
</span><span id="BidsArchitecture-646"><a href="#BidsArchitecture-646"><span class="linenos">646</span></a><span class="sd">            **kwargs: BIDS entities to filter by (</span>
</span><span id="BidsArchitecture-647"><a href="#BidsArchitecture-647"><span class="linenos">647</span></a><span class="sd">                      e.g., subject=&#39;01&#39;, session=&#39;1&#39;).</span>
</span><span id="BidsArchitecture-648"><a href="#BidsArchitecture-648"><span class="linenos">648</span></a>
</span><span id="BidsArchitecture-649"><a href="#BidsArchitecture-649"><span class="linenos">649</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-650"><a href="#BidsArchitecture-650"><span class="linenos">650</span></a><span class="sd">            BidsArchitecture: Filtered instance containing only matching files.</span>
</span><span id="BidsArchitecture-651"><a href="#BidsArchitecture-651"><span class="linenos">651</span></a>
</span><span id="BidsArchitecture-652"><a href="#BidsArchitecture-652"><span class="linenos">652</span></a><span class="sd">        Example 1:</span>
</span><span id="BidsArchitecture-653"><a href="#BidsArchitecture-653"><span class="linenos">653</span></a><span class="sd">            &gt;&gt;&gt; bids = BidsArchitecture(</span>
</span><span id="BidsArchitecture-654"><a href="#BidsArchitecture-654"><span class="linenos">654</span></a><span class="sd">            ...     &quot;path/to/data&quot;</span>
</span><span id="BidsArchitecture-655"><a href="#BidsArchitecture-655"><span class="linenos">655</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-656"><a href="#BidsArchitecture-656"><span class="linenos">656</span></a><span class="sd">            &gt;&gt;&gt; subset = bids.select(</span>
</span><span id="BidsArchitecture-657"><a href="#BidsArchitecture-657"><span class="linenos">657</span></a><span class="sd">            ...     subject=&quot;01&quot;,</span>
</span><span id="BidsArchitecture-658"><a href="#BidsArchitecture-658"><span class="linenos">658</span></a><span class="sd">            ...     session=&quot;1&quot;,</span>
</span><span id="BidsArchitecture-659"><a href="#BidsArchitecture-659"><span class="linenos">659</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-660"><a href="#BidsArchitecture-660"><span class="linenos">660</span></a>
</span><span id="BidsArchitecture-661"><a href="#BidsArchitecture-661"><span class="linenos">661</span></a><span class="sd">        Example 2:</span>
</span><span id="BidsArchitecture-662"><a href="#BidsArchitecture-662"><span class="linenos">662</span></a><span class="sd">            It is possible to select multiple subjects at once:</span>
</span><span id="BidsArchitecture-663"><a href="#BidsArchitecture-663"><span class="linenos">663</span></a><span class="sd">            &gt;&gt;&gt; subset = (</span>
</span><span id="BidsArchitecture-664"><a href="#BidsArchitecture-664"><span class="linenos">664</span></a><span class="sd">            ...     bids.select(</span>
</span><span id="BidsArchitecture-665"><a href="#BidsArchitecture-665"><span class="linenos">665</span></a><span class="sd">            ...         subject=[</span>
</span><span id="BidsArchitecture-666"><a href="#BidsArchitecture-666"><span class="linenos">666</span></a><span class="sd">            ...             &quot;01&quot;,</span>
</span><span id="BidsArchitecture-667"><a href="#BidsArchitecture-667"><span class="linenos">667</span></a><span class="sd">            ...             &quot;02&quot;,</span>
</span><span id="BidsArchitecture-668"><a href="#BidsArchitecture-668"><span class="linenos">668</span></a><span class="sd">            ...         ]</span>
</span><span id="BidsArchitecture-669"><a href="#BidsArchitecture-669"><span class="linenos">669</span></a><span class="sd">            ...     )</span>
</span><span id="BidsArchitecture-670"><a href="#BidsArchitecture-670"><span class="linenos">670</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-671"><a href="#BidsArchitecture-671"><span class="linenos">671</span></a>
</span><span id="BidsArchitecture-672"><a href="#BidsArchitecture-672"><span class="linenos">672</span></a><span class="sd">        Example 3:</span>
</span><span id="BidsArchitecture-673"><a href="#BidsArchitecture-673"><span class="linenos">673</span></a><span class="sd">            If we don&#39;t know the exact session number, we can use a wildcard</span>
</span><span id="BidsArchitecture-674"><a href="#BidsArchitecture-674"><span class="linenos">674</span></a><span class="sd">            with a `-` to tell we want from session 1 to the maximum number of</span>
</span><span id="BidsArchitecture-675"><a href="#BidsArchitecture-675"><span class="linenos">675</span></a><span class="sd">            sessions:</span>
</span><span id="BidsArchitecture-676"><a href="#BidsArchitecture-676"><span class="linenos">676</span></a><span class="sd">            &gt;&gt;&gt; subset = bids.select(</span>
</span><span id="BidsArchitecture-677"><a href="#BidsArchitecture-677"><span class="linenos">677</span></a><span class="sd">            ...     session=&quot;1-*&quot;</span>
</span><span id="BidsArchitecture-678"><a href="#BidsArchitecture-678"><span class="linenos">678</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-679"><a href="#BidsArchitecture-679"><span class="linenos">679</span></a>
</span><span id="BidsArchitecture-680"><a href="#BidsArchitecture-680"><span class="linenos">680</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-681"><a href="#BidsArchitecture-681"><span class="linenos">681</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_mask</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</span><span id="BidsArchitecture-682"><a href="#BidsArchitecture-682"><span class="linenos">682</span></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
</span><span id="BidsArchitecture-683"><a href="#BidsArchitecture-683"><span class="linenos">683</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture-684"><a href="#BidsArchitecture-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="BidsArchitecture-685"><a href="#BidsArchitecture-685"><span class="linenos">685</span></a>
</span><span id="BidsArchitecture-686"><a href="#BidsArchitecture-686"><span class="linenos">686</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BidsArchitecture-687"><a href="#BidsArchitecture-687"><span class="linenos">687</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">mask</span><span class="p">):</span>
</span><span id="BidsArchitecture-688"><a href="#BidsArchitecture-688"><span class="linenos">688</span></a>            <span class="n">new_database</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</span><span id="BidsArchitecture-689"><a href="#BidsArchitecture-689"><span class="linenos">689</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture-690"><a href="#BidsArchitecture-690"><span class="linenos">690</span></a>            <span class="n">new_database</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture-691"><a href="#BidsArchitecture-691"><span class="linenos">691</span></a>
</span><span id="BidsArchitecture-692"><a href="#BidsArchitecture-692"><span class="linenos">692</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">new_instance</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="n">new_database</span><span class="p">)</span>
</span><span id="BidsArchitecture-693"><a href="#BidsArchitecture-693"><span class="linenos">693</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span><span id="BidsArchitecture-694"><a href="#BidsArchitecture-694"><span class="linenos">694</span></a>
</span><span id="BidsArchitecture-695"><a href="#BidsArchitecture-695"><span class="linenos">695</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span>
</span><span id="BidsArchitecture-696"><a href="#BidsArchitecture-696"><span class="linenos">696</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="BidsArchitecture-697"><a href="#BidsArchitecture-697"><span class="linenos">697</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture-698"><a href="#BidsArchitecture-698"><span class="linenos">698</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove files from database based on BIDS entities.</span>
</span><span id="BidsArchitecture-699"><a href="#BidsArchitecture-699"><span class="linenos">699</span></a>
</span><span id="BidsArchitecture-700"><a href="#BidsArchitecture-700"><span class="linenos">700</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture-701"><a href="#BidsArchitecture-701"><span class="linenos">701</span></a><span class="sd">            inplace: If True, modify the current instance.</span>
</span><span id="BidsArchitecture-702"><a href="#BidsArchitecture-702"><span class="linenos">702</span></a><span class="sd">                     If False, return a new instance.</span>
</span><span id="BidsArchitecture-703"><a href="#BidsArchitecture-703"><span class="linenos">703</span></a><span class="sd">            **kwargs: BIDS entities to filter by for removal.</span>
</span><span id="BidsArchitecture-704"><a href="#BidsArchitecture-704"><span class="linenos">704</span></a>
</span><span id="BidsArchitecture-705"><a href="#BidsArchitecture-705"><span class="linenos">705</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture-706"><a href="#BidsArchitecture-706"><span class="linenos">706</span></a><span class="sd">            BidsArchitecture: Instance with specified files removed.</span>
</span><span id="BidsArchitecture-707"><a href="#BidsArchitecture-707"><span class="linenos">707</span></a>
</span><span id="BidsArchitecture-708"><a href="#BidsArchitecture-708"><span class="linenos">708</span></a><span class="sd">        Examples:</span>
</span><span id="BidsArchitecture-709"><a href="#BidsArchitecture-709"><span class="linenos">709</span></a><span class="sd">            &gt;&gt;&gt; bids = BidsArchitecture(</span>
</span><span id="BidsArchitecture-710"><a href="#BidsArchitecture-710"><span class="linenos">710</span></a><span class="sd">            ...     &quot;path/to/data&quot;</span>
</span><span id="BidsArchitecture-711"><a href="#BidsArchitecture-711"><span class="linenos">711</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-712"><a href="#BidsArchitecture-712"><span class="linenos">712</span></a><span class="sd">            &gt;&gt;&gt; # Remove all files for subject &#39;01&#39;</span>
</span><span id="BidsArchitecture-713"><a href="#BidsArchitecture-713"><span class="linenos">713</span></a><span class="sd">            &gt;&gt;&gt; filtered = (</span>
</span><span id="BidsArchitecture-714"><a href="#BidsArchitecture-714"><span class="linenos">714</span></a><span class="sd">            ...     bids.remove(</span>
</span><span id="BidsArchitecture-715"><a href="#BidsArchitecture-715"><span class="linenos">715</span></a><span class="sd">            ...         subject=&quot;01&quot;</span>
</span><span id="BidsArchitecture-716"><a href="#BidsArchitecture-716"><span class="linenos">716</span></a><span class="sd">            ...     )</span>
</span><span id="BidsArchitecture-717"><a href="#BidsArchitecture-717"><span class="linenos">717</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture-718"><a href="#BidsArchitecture-718"><span class="linenos">718</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture-719"><a href="#BidsArchitecture-719"><span class="linenos">719</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_mask</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="BidsArchitecture-720"><a href="#BidsArchitecture-720"><span class="linenos">720</span></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
</span><span id="BidsArchitecture-721"><a href="#BidsArchitecture-721"><span class="linenos">721</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture-722"><a href="#BidsArchitecture-722"><span class="linenos">722</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="BidsArchitecture-723"><a href="#BidsArchitecture-723"><span class="linenos">723</span></a>
</span><span id="BidsArchitecture-724"><a href="#BidsArchitecture-724"><span class="linenos">724</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BidsArchitecture-725"><a href="#BidsArchitecture-725"><span class="linenos">725</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">new_instance</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="n">new_instance</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture-726"><a href="#BidsArchitecture-726"><span class="linenos">726</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span></pre></div>


            <div class="docstring"><p>Main class for handling BIDS directory structure.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>root:</strong>  Optional root path to BIDS directory.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>root (Optional[Path]):</strong>  Path to the BIDS directory root, or None if not set.</li>
<li><strong>database (pd.DataFrame):</strong>  DataFrame containing all BIDS files and their metadata.</li>
<li><strong>errors (List[Dict[str, Any]]):</strong>  List of validation errors found during database creation.</li>
<li><strong>subjects (List[str]):</strong>  List of subjects IDs present in the instance.</li>
<li><strong>sessions (List[str]):</strong>  List of session IDs present in the instance.</li>
<li><strong>datatypes (List[str]):</strong>  List of datatypes present in the dataset.</li>
<li><strong>tasks (List[str]):</strong>  List of task names present in the dataset.</li>
<li><strong>runs (List[str]):</strong>  List of run numbers present in the dataset.</li>
</ul>
</div>


                            <div id="BidsArchitecture.__init__" class="classattr">
                                        <input id="BidsArchitecture.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">BidsArchitecture</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">root</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">_local</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">subject</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">datatype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">acquisition</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">recording</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">suffix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">extension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="BidsArchitecture.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.__init__-49"><a href="#BidsArchitecture.__init__-49"><span class="linenos">49</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># noqa: D107</span>
</span><span id="BidsArchitecture.__init__-50"><a href="#BidsArchitecture.__init__-50"><span class="linenos">50</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-51"><a href="#BidsArchitecture.__init__-51"><span class="linenos">51</span></a>        <span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-52"><a href="#BidsArchitecture.__init__-52"><span class="linenos">52</span></a>        <span class="n">subject</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-53"><a href="#BidsArchitecture.__init__-53"><span class="linenos">53</span></a>        <span class="n">session</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-54"><a href="#BidsArchitecture.__init__-54"><span class="linenos">54</span></a>        <span class="n">datatype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-55"><a href="#BidsArchitecture.__init__-55"><span class="linenos">55</span></a>        <span class="n">task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-56"><a href="#BidsArchitecture.__init__-56"><span class="linenos">56</span></a>        <span class="n">run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-57"><a href="#BidsArchitecture.__init__-57"><span class="linenos">57</span></a>        <span class="n">acquisition</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-58"><a href="#BidsArchitecture.__init__-58"><span class="linenos">58</span></a>        <span class="n">recording</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-59"><a href="#BidsArchitecture.__init__-59"><span class="linenos">59</span></a>        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-60"><a href="#BidsArchitecture.__init__-60"><span class="linenos">60</span></a>        <span class="n">suffix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-61"><a href="#BidsArchitecture.__init__-61"><span class="linenos">61</span></a>        <span class="n">extension</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-62"><a href="#BidsArchitecture.__init__-62"><span class="linenos">62</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture.__init__-63"><a href="#BidsArchitecture.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="k">if</span> <span class="n">root</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="BidsArchitecture.__init__-64"><a href="#BidsArchitecture.__init__-64"><span class="linenos">64</span></a>        <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
</span><span id="BidsArchitecture.__init__-65"><a href="#BidsArchitecture.__init__-65"><span class="linenos">65</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_path_handler</span> <span class="o">=</span> <span class="n">BidsQuery</span><span class="p">(</span>
</span><span id="BidsArchitecture.__init__-66"><a href="#BidsArchitecture.__init__-66"><span class="linenos">66</span></a>                <span class="n">root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-67"><a href="#BidsArchitecture.__init__-67"><span class="linenos">67</span></a>                <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-68"><a href="#BidsArchitecture.__init__-68"><span class="linenos">68</span></a>                <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-69"><a href="#BidsArchitecture.__init__-69"><span class="linenos">69</span></a>                <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-70"><a href="#BidsArchitecture.__init__-70"><span class="linenos">70</span></a>                <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-71"><a href="#BidsArchitecture.__init__-71"><span class="linenos">71</span></a>                <span class="n">run</span><span class="o">=</span><span class="n">run</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-72"><a href="#BidsArchitecture.__init__-72"><span class="linenos">72</span></a>                <span class="n">acquisition</span><span class="o">=</span><span class="n">acquisition</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-73"><a href="#BidsArchitecture.__init__-73"><span class="linenos">73</span></a>                <span class="n">recording</span><span class="o">=</span><span class="n">recording</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-74"><a href="#BidsArchitecture.__init__-74"><span class="linenos">74</span></a>                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-75"><a href="#BidsArchitecture.__init__-75"><span class="linenos">75</span></a>                <span class="n">suffix</span><span class="o">=</span><span class="n">suffix</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-76"><a href="#BidsArchitecture.__init__-76"><span class="linenos">76</span></a>                <span class="n">extension</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span>
</span><span id="BidsArchitecture.__init__-77"><a href="#BidsArchitecture.__init__-77"><span class="linenos">77</span></a>            <span class="p">)</span>
</span><span id="BidsArchitecture.__init__-78"><a href="#BidsArchitecture.__init__-78"><span class="linenos">78</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_database</span><span class="p">()</span>
</span><span id="BidsArchitecture.__init__-79"><a href="#BidsArchitecture.__init__-79"><span class="linenos">79</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture.__init__-80"><a href="#BidsArchitecture.__init__-80"><span class="linenos">80</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture.__init__-81"><a href="#BidsArchitecture.__init__-81"><span class="linenos">81</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="BidsArchitecture.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span>

        
    </div>
    <a class="headerlink" href="#BidsArchitecture.root"></a>
    
    

                            </div>
                            <div id="BidsArchitecture.database" class="classattr">
                                        <input id="BidsArchitecture.database-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">database</span><span class="annotation">: pandas.core.frame.DataFrame</span>

                <label class="view-source-button" for="BidsArchitecture.database-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.database"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.database-159"><a href="#BidsArchitecture.database-159"><span class="linenos">159</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.database-160"><a href="#BidsArchitecture.database-160"><span class="linenos">160</span></a>    <span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="BidsArchitecture.database-161"><a href="#BidsArchitecture.database-161"><span class="linenos">161</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the BIDS dataset as a DataFrame.</span>
</span><span id="BidsArchitecture.database-162"><a href="#BidsArchitecture.database-162"><span class="linenos">162</span></a>
</span><span id="BidsArchitecture.database-163"><a href="#BidsArchitecture.database-163"><span class="linenos">163</span></a><span class="sd">        This DataFrame represents the entire BIDS dataset with indexed files.</span>
</span><span id="BidsArchitecture.database-164"><a href="#BidsArchitecture.database-164"><span class="linenos">164</span></a><span class="sd">        Each row represents a single file, with columns containing:</span>
</span><span id="BidsArchitecture.database-165"><a href="#BidsArchitecture.database-165"><span class="linenos">165</span></a><span class="sd">        - BIDS entities (subject, session, datatype, task, run, etc.)</span>
</span><span id="BidsArchitecture.database-166"><a href="#BidsArchitecture.database-166"><span class="linenos">166</span></a><span class="sd">        - Full file path</span>
</span><span id="BidsArchitecture.database-167"><a href="#BidsArchitecture.database-167"><span class="linenos">167</span></a><span class="sd">        - UNIX metadata (atime, mtime, ctime)</span>
</span><span id="BidsArchitecture.database-168"><a href="#BidsArchitecture.database-168"><span class="linenos">168</span></a>
</span><span id="BidsArchitecture.database-169"><a href="#BidsArchitecture.database-169"><span class="linenos">169</span></a><span class="sd">        Rows are indexed by the file&#39;s inode number, which uniquely identifies</span>
</span><span id="BidsArchitecture.database-170"><a href="#BidsArchitecture.database-170"><span class="linenos">170</span></a><span class="sd">        each file in the filesystem.</span>
</span><span id="BidsArchitecture.database-171"><a href="#BidsArchitecture.database-171"><span class="linenos">171</span></a>
</span><span id="BidsArchitecture.database-172"><a href="#BidsArchitecture.database-172"><span class="linenos">172</span></a><span class="sd">        This DataFrame serves as the core representation of the BIDS dataset</span>
</span><span id="BidsArchitecture.database-173"><a href="#BidsArchitecture.database-173"><span class="linenos">173</span></a><span class="sd">        and is used for all operations.</span>
</span><span id="BidsArchitecture.database-174"><a href="#BidsArchitecture.database-174"><span class="linenos">174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.database-175"><a href="#BidsArchitecture.database-175"><span class="linenos">175</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">):</span>
</span><span id="BidsArchitecture.database-176"><a href="#BidsArchitecture.database-176"><span class="linenos">176</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span>
</span><span id="BidsArchitecture.database-177"><a href="#BidsArchitecture.database-177"><span class="linenos">177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture.database-178"><a href="#BidsArchitecture.database-178"><span class="linenos">178</span></a>            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns the BIDS dataset as a DataFrame.</p>

<p>This DataFrame represents the entire BIDS dataset with indexed files.
Each row represents a single file, with columns containing:</p>

<ul>
<li>BIDS entities (subject, session, datatype, task, run, etc.)</li>
<li>Full file path</li>
<li>UNIX metadata (atime, mtime, ctime)</li>
</ul>

<p>Rows are indexed by the file's inode number, which uniquely identifies
each file in the filesystem.</p>

<p>This DataFrame serves as the core representation of the BIDS dataset
and is used for all operations.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.errors" class="classattr">
                                        <input id="BidsArchitecture.errors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">errors</span><span class="annotation">: pandas.core.frame.DataFrame</span>

                <label class="view-source-button" for="BidsArchitecture.errors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.errors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.errors-187"><a href="#BidsArchitecture.errors-187"><span class="linenos">187</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.errors-188"><a href="#BidsArchitecture.errors-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">errors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="BidsArchitecture.errors-189"><a href="#BidsArchitecture.errors-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the error log as a DataFrame.</span>
</span><span id="BidsArchitecture.errors-190"><a href="#BidsArchitecture.errors-190"><span class="linenos">190</span></a>
</span><span id="BidsArchitecture.errors-191"><a href="#BidsArchitecture.errors-191"><span class="linenos">191</span></a><span class="sd">        This DataFrame contains information about files that failed validation</span>
</span><span id="BidsArchitecture.errors-192"><a href="#BidsArchitecture.errors-192"><span class="linenos">192</span></a><span class="sd">        during the database creation process.</span>
</span><span id="BidsArchitecture.errors-193"><a href="#BidsArchitecture.errors-193"><span class="linenos">193</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.errors-194"><a href="#BidsArchitecture.errors-194"><span class="linenos">194</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_errors&quot;</span><span class="p">):</span>
</span><span id="BidsArchitecture.errors-195"><a href="#BidsArchitecture.errors-195"><span class="linenos">195</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span>
</span><span id="BidsArchitecture.errors-196"><a href="#BidsArchitecture.errors-196"><span class="linenos">196</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture.errors-197"><a href="#BidsArchitecture.errors-197"><span class="linenos">197</span></a>            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns the error log as a DataFrame.</p>

<p>This DataFrame contains information about files that failed validation
during the database creation process.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.subjects" class="classattr">
                                        <input id="BidsArchitecture.subjects-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">subjects</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.subjects-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.subjects"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.subjects-230"><a href="#BidsArchitecture.subjects-230"><span class="linenos">230</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.subjects-231"><a href="#BidsArchitecture.subjects-231"><span class="linenos">231</span></a>    <span class="k">def</span> <span class="nf">subjects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.subjects-232"><a href="#BidsArchitecture.subjects-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique subjects present in the dataset.</span>
</span><span id="BidsArchitecture.subjects-233"><a href="#BidsArchitecture.subjects-233"><span class="linenos">233</span></a>
</span><span id="BidsArchitecture.subjects-234"><a href="#BidsArchitecture.subjects-234"><span class="linenos">234</span></a><span class="sd">        This list contains all the subject IDs found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.subjects-235"><a href="#BidsArchitecture.subjects-235"><span class="linenos">235</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.subjects-236"><a href="#BidsArchitecture.subjects-236"><span class="linenos">236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.subjects-237"><a href="#BidsArchitecture.subjects-237"><span class="linenos">237</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;subject&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique subjects present in the dataset.</p>

<p>This list contains all the subject IDs found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.sessions" class="classattr">
                                        <input id="BidsArchitecture.sessions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">sessions</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.sessions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.sessions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.sessions-239"><a href="#BidsArchitecture.sessions-239"><span class="linenos">239</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.sessions-240"><a href="#BidsArchitecture.sessions-240"><span class="linenos">240</span></a>    <span class="k">def</span> <span class="nf">sessions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.sessions-241"><a href="#BidsArchitecture.sessions-241"><span class="linenos">241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique sessions present in the dataset.</span>
</span><span id="BidsArchitecture.sessions-242"><a href="#BidsArchitecture.sessions-242"><span class="linenos">242</span></a>
</span><span id="BidsArchitecture.sessions-243"><a href="#BidsArchitecture.sessions-243"><span class="linenos">243</span></a><span class="sd">        This list contains all the session IDs found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.sessions-244"><a href="#BidsArchitecture.sessions-244"><span class="linenos">244</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.sessions-245"><a href="#BidsArchitecture.sessions-245"><span class="linenos">245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.sessions-246"><a href="#BidsArchitecture.sessions-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique sessions present in the dataset.</p>

<p>This list contains all the session IDs found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.datatypes" class="classattr">
                                        <input id="BidsArchitecture.datatypes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">datatypes</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.datatypes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.datatypes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.datatypes-248"><a href="#BidsArchitecture.datatypes-248"><span class="linenos">248</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.datatypes-249"><a href="#BidsArchitecture.datatypes-249"><span class="linenos">249</span></a>    <span class="k">def</span> <span class="nf">datatypes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.datatypes-250"><a href="#BidsArchitecture.datatypes-250"><span class="linenos">250</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique datatypes present in the dataset.</span>
</span><span id="BidsArchitecture.datatypes-251"><a href="#BidsArchitecture.datatypes-251"><span class="linenos">251</span></a>
</span><span id="BidsArchitecture.datatypes-252"><a href="#BidsArchitecture.datatypes-252"><span class="linenos">252</span></a><span class="sd">        This list contains all the datatypes found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.datatypes-253"><a href="#BidsArchitecture.datatypes-253"><span class="linenos">253</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.datatypes-254"><a href="#BidsArchitecture.datatypes-254"><span class="linenos">254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.datatypes-255"><a href="#BidsArchitecture.datatypes-255"><span class="linenos">255</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;datatype&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique datatypes present in the dataset.</p>

<p>This list contains all the datatypes found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.tasks" class="classattr">
                                        <input id="BidsArchitecture.tasks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tasks</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.tasks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.tasks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.tasks-257"><a href="#BidsArchitecture.tasks-257"><span class="linenos">257</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.tasks-258"><a href="#BidsArchitecture.tasks-258"><span class="linenos">258</span></a>    <span class="k">def</span> <span class="nf">tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.tasks-259"><a href="#BidsArchitecture.tasks-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique tasks present in the dataset.</span>
</span><span id="BidsArchitecture.tasks-260"><a href="#BidsArchitecture.tasks-260"><span class="linenos">260</span></a>
</span><span id="BidsArchitecture.tasks-261"><a href="#BidsArchitecture.tasks-261"><span class="linenos">261</span></a><span class="sd">        This list contains all the task names found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.tasks-262"><a href="#BidsArchitecture.tasks-262"><span class="linenos">262</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.tasks-263"><a href="#BidsArchitecture.tasks-263"><span class="linenos">263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.tasks-264"><a href="#BidsArchitecture.tasks-264"><span class="linenos">264</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique tasks present in the dataset.</p>

<p>This list contains all the task names found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.runs" class="classattr">
                                        <input id="BidsArchitecture.runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">runs</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.runs-266"><a href="#BidsArchitecture.runs-266"><span class="linenos">266</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.runs-267"><a href="#BidsArchitecture.runs-267"><span class="linenos">267</span></a>    <span class="k">def</span> <span class="nf">runs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.runs-268"><a href="#BidsArchitecture.runs-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique runs present in the dataset.</span>
</span><span id="BidsArchitecture.runs-269"><a href="#BidsArchitecture.runs-269"><span class="linenos">269</span></a>
</span><span id="BidsArchitecture.runs-270"><a href="#BidsArchitecture.runs-270"><span class="linenos">270</span></a><span class="sd">        This list contains all the run numbers found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.runs-271"><a href="#BidsArchitecture.runs-271"><span class="linenos">271</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.runs-272"><a href="#BidsArchitecture.runs-272"><span class="linenos">272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.runs-273"><a href="#BidsArchitecture.runs-273"><span class="linenos">273</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;run&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique runs present in the dataset.</p>

<p>This list contains all the run numbers found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.acquisitions" class="classattr">
                                        <input id="BidsArchitecture.acquisitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">acquisitions</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.acquisitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.acquisitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.acquisitions-275"><a href="#BidsArchitecture.acquisitions-275"><span class="linenos">275</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.acquisitions-276"><a href="#BidsArchitecture.acquisitions-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">acquisitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.acquisitions-277"><a href="#BidsArchitecture.acquisitions-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique acquisitions present in the dataset.</span>
</span><span id="BidsArchitecture.acquisitions-278"><a href="#BidsArchitecture.acquisitions-278"><span class="linenos">278</span></a>
</span><span id="BidsArchitecture.acquisitions-279"><a href="#BidsArchitecture.acquisitions-279"><span class="linenos">279</span></a><span class="sd">        This list contains all the acquisition names found in the BIDS dataset</span>
</span><span id="BidsArchitecture.acquisitions-280"><a href="#BidsArchitecture.acquisitions-280"><span class="linenos">280</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture.acquisitions-281"><a href="#BidsArchitecture.acquisitions-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.acquisitions-282"><a href="#BidsArchitecture.acquisitions-282"><span class="linenos">282</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;acquisition&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique acquisitions present in the dataset.</p>

<p>This list contains all the acquisition names found in the BIDS dataset
or after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.recordings" class="classattr">
                                        <input id="BidsArchitecture.recordings-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">recordings</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.recordings-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.recordings"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.recordings-284"><a href="#BidsArchitecture.recordings-284"><span class="linenos">284</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.recordings-285"><a href="#BidsArchitecture.recordings-285"><span class="linenos">285</span></a>    <span class="k">def</span> <span class="nf">recordings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.recordings-286"><a href="#BidsArchitecture.recordings-286"><span class="linenos">286</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique recordings present in the dataset.</span>
</span><span id="BidsArchitecture.recordings-287"><a href="#BidsArchitecture.recordings-287"><span class="linenos">287</span></a>
</span><span id="BidsArchitecture.recordings-288"><a href="#BidsArchitecture.recordings-288"><span class="linenos">288</span></a><span class="sd">        This list contains all the recording names found in the BIDS dataset</span>
</span><span id="BidsArchitecture.recordings-289"><a href="#BidsArchitecture.recordings-289"><span class="linenos">289</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture.recordings-290"><a href="#BidsArchitecture.recordings-290"><span class="linenos">290</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.recordings-291"><a href="#BidsArchitecture.recordings-291"><span class="linenos">291</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique recordings present in the dataset.</p>

<p>This list contains all the recording names found in the BIDS dataset
or after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.descriptions" class="classattr">
                                        <input id="BidsArchitecture.descriptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">descriptions</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.descriptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.descriptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.descriptions-293"><a href="#BidsArchitecture.descriptions-293"><span class="linenos">293</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.descriptions-294"><a href="#BidsArchitecture.descriptions-294"><span class="linenos">294</span></a>    <span class="k">def</span> <span class="nf">descriptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.descriptions-295"><a href="#BidsArchitecture.descriptions-295"><span class="linenos">295</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique descriptions present in the dataset.</span>
</span><span id="BidsArchitecture.descriptions-296"><a href="#BidsArchitecture.descriptions-296"><span class="linenos">296</span></a>
</span><span id="BidsArchitecture.descriptions-297"><a href="#BidsArchitecture.descriptions-297"><span class="linenos">297</span></a><span class="sd">        This list contains all the description names found in the BIDS dataset</span>
</span><span id="BidsArchitecture.descriptions-298"><a href="#BidsArchitecture.descriptions-298"><span class="linenos">298</span></a><span class="sd">        or after a selection has been performed.</span>
</span><span id="BidsArchitecture.descriptions-299"><a href="#BidsArchitecture.descriptions-299"><span class="linenos">299</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.descriptions-300"><a href="#BidsArchitecture.descriptions-300"><span class="linenos">300</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique descriptions present in the dataset.</p>

<p>This list contains all the description names found in the BIDS dataset
or after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.suffixes" class="classattr">
                                        <input id="BidsArchitecture.suffixes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">suffixes</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.suffixes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.suffixes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.suffixes-302"><a href="#BidsArchitecture.suffixes-302"><span class="linenos">302</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.suffixes-303"><a href="#BidsArchitecture.suffixes-303"><span class="linenos">303</span></a>    <span class="k">def</span> <span class="nf">suffixes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BidsArchitecture.suffixes-304"><a href="#BidsArchitecture.suffixes-304"><span class="linenos">304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of unique suffixes present in the dataset.</span>
</span><span id="BidsArchitecture.suffixes-305"><a href="#BidsArchitecture.suffixes-305"><span class="linenos">305</span></a>
</span><span id="BidsArchitecture.suffixes-306"><a href="#BidsArchitecture.suffixes-306"><span class="linenos">306</span></a><span class="sd">        This list contains all the suffixes found in the BIDS dataset or</span>
</span><span id="BidsArchitecture.suffixes-307"><a href="#BidsArchitecture.suffixes-307"><span class="linenos">307</span></a><span class="sd">        after a selection has been performed.</span>
</span><span id="BidsArchitecture.suffixes-308"><a href="#BidsArchitecture.suffixes-308"><span class="linenos">308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.suffixes-309"><a href="#BidsArchitecture.suffixes-309"><span class="linenos">309</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;suffix&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a list of unique suffixes present in the dataset.</p>

<p>This list contains all the suffixes found in the BIDS dataset or
after a selection has been performed.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.extensions" class="classattr">
                                        <input id="BidsArchitecture.extensions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">extensions</span><span class="annotation">: List[str]</span>

                <label class="view-source-button" for="BidsArchitecture.extensions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.extensions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.extensions-311"><a href="#BidsArchitecture.extensions-311"><span class="linenos">311</span></a>    <span class="nd">@property</span>
</span><span id="BidsArchitecture.extensions-312"><a href="#BidsArchitecture.extensions-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="nf">extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>  <span class="c1"># noqa: D102</span>
</span><span id="BidsArchitecture.extensions-313"><a href="#BidsArchitecture.extensions-313"><span class="linenos">313</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_values</span><span class="p">(</span><span class="s2">&quot;extension&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BidsArchitecture.create_database" class="classattr">
                                        <input id="BidsArchitecture.create_database-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_database</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">tuple</span><span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="BidsArchitecture.create_database-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.create_database"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.create_database-315"><a href="#BidsArchitecture.create_database-315"><span class="linenos">315</span></a>    <span class="k">def</span> <span class="nf">create_database</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
</span><span id="BidsArchitecture.create_database-316"><a href="#BidsArchitecture.create_database-316"><span class="linenos">316</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Scan filesystem and build DataFrame of matching files.</span>
</span><span id="BidsArchitecture.create_database-317"><a href="#BidsArchitecture.create_database-317"><span class="linenos">317</span></a>
</span><span id="BidsArchitecture.create_database-318"><a href="#BidsArchitecture.create_database-318"><span class="linenos">318</span></a><span class="sd">        Walks through the BIDS directory structure and creates two DataFrames:</span>
</span><span id="BidsArchitecture.create_database-319"><a href="#BidsArchitecture.create_database-319"><span class="linenos">319</span></a><span class="sd">        one for valid files and one for errors encountered during scanning.</span>
</span><span id="BidsArchitecture.create_database-320"><a href="#BidsArchitecture.create_database-320"><span class="linenos">320</span></a>
</span><span id="BidsArchitecture.create_database-321"><a href="#BidsArchitecture.create_database-321"><span class="linenos">321</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture.create_database-322"><a href="#BidsArchitecture.create_database-322"><span class="linenos">322</span></a><span class="sd">            tuple[pd.DataFrame, pd.DataFrame]: Tuple containing</span>
</span><span id="BidsArchitecture.create_database-323"><a href="#BidsArchitecture.create_database-323"><span class="linenos">323</span></a><span class="sd">                                               (database, error_log)</span>
</span><span id="BidsArchitecture.create_database-324"><a href="#BidsArchitecture.create_database-324"><span class="linenos">324</span></a>
</span><span id="BidsArchitecture.create_database-325"><a href="#BidsArchitecture.create_database-325"><span class="linenos">325</span></a><span class="sd">        Raises:</span>
</span><span id="BidsArchitecture.create_database-326"><a href="#BidsArchitecture.create_database-326"><span class="linenos">326</span></a><span class="sd">            ValueError: If root directory is not set.</span>
</span><span id="BidsArchitecture.create_database-327"><a href="#BidsArchitecture.create_database-327"><span class="linenos">327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.create_database-328"><a href="#BidsArchitecture.create_database-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span id="BidsArchitecture.create_database-329"><a href="#BidsArchitecture.create_database-329"><span class="linenos">329</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Root directory not set&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture.create_database-330"><a href="#BidsArchitecture.create_database-330"><span class="linenos">330</span></a>
</span><span id="BidsArchitecture.create_database-331"><a href="#BidsArchitecture.create_database-331"><span class="linenos">331</span></a>        <span class="n">database_keys</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="BidsArchitecture.create_database-332"><a href="#BidsArchitecture.create_database-332"><span class="linenos">332</span></a>            <span class="s2">&quot;inode&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-333"><a href="#BidsArchitecture.create_database-333"><span class="linenos">333</span></a>            <span class="s2">&quot;root&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-334"><a href="#BidsArchitecture.create_database-334"><span class="linenos">334</span></a>            <span class="s2">&quot;subject&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-335"><a href="#BidsArchitecture.create_database-335"><span class="linenos">335</span></a>            <span class="s2">&quot;session&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-336"><a href="#BidsArchitecture.create_database-336"><span class="linenos">336</span></a>            <span class="s2">&quot;datatype&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-337"><a href="#BidsArchitecture.create_database-337"><span class="linenos">337</span></a>            <span class="s2">&quot;task&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-338"><a href="#BidsArchitecture.create_database-338"><span class="linenos">338</span></a>            <span class="s2">&quot;run&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-339"><a href="#BidsArchitecture.create_database-339"><span class="linenos">339</span></a>            <span class="s2">&quot;acquisition&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-340"><a href="#BidsArchitecture.create_database-340"><span class="linenos">340</span></a>            <span class="s2">&quot;recording&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-341"><a href="#BidsArchitecture.create_database-341"><span class="linenos">341</span></a>            <span class="s2">&quot;description&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-342"><a href="#BidsArchitecture.create_database-342"><span class="linenos">342</span></a>            <span class="s2">&quot;suffix&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-343"><a href="#BidsArchitecture.create_database-343"><span class="linenos">343</span></a>            <span class="s2">&quot;extension&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-344"><a href="#BidsArchitecture.create_database-344"><span class="linenos">344</span></a>            <span class="s2">&quot;atime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-345"><a href="#BidsArchitecture.create_database-345"><span class="linenos">345</span></a>            <span class="s2">&quot;mtime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-346"><a href="#BidsArchitecture.create_database-346"><span class="linenos">346</span></a>            <span class="s2">&quot;ctime&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-347"><a href="#BidsArchitecture.create_database-347"><span class="linenos">347</span></a>            <span class="s2">&quot;filename&quot;</span><span class="p">,</span>
</span><span id="BidsArchitecture.create_database-348"><a href="#BidsArchitecture.create_database-348"><span class="linenos">348</span></a>        <span class="p">]</span>
</span><span id="BidsArchitecture.create_database-349"><a href="#BidsArchitecture.create_database-349"><span class="linenos">349</span></a>
</span><span id="BidsArchitecture.create_database-350"><a href="#BidsArchitecture.create_database-350"><span class="linenos">350</span></a>        <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">database_keys</span><span class="p">}</span>
</span><span id="BidsArchitecture.create_database-351"><a href="#BidsArchitecture.create_database-351"><span class="linenos">351</span></a>        <span class="n">error_flags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="BidsArchitecture.create_database-352"><a href="#BidsArchitecture.create_database-352"><span class="linenos">352</span></a>            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture.create_database-353"><a href="#BidsArchitecture.create_database-353"><span class="linenos">353</span></a>            <span class="s2">&quot;error_type&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture.create_database-354"><a href="#BidsArchitecture.create_database-354"><span class="linenos">354</span></a>            <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture.create_database-355"><a href="#BidsArchitecture.create_database-355"><span class="linenos">355</span></a>            <span class="s2">&quot;inode&quot;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="BidsArchitecture.create_database-356"><a href="#BidsArchitecture.create_database-356"><span class="linenos">356</span></a>        <span class="p">}</span>
</span><span id="BidsArchitecture.create_database-357"><a href="#BidsArchitecture.create_database-357"><span class="linenos">357</span></a>
</span><span id="BidsArchitecture.create_database-358"><a href="#BidsArchitecture.create_database-358"><span class="linenos">358</span></a>        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path_handler</span><span class="o">.</span><span class="n">generate</span><span class="p">():</span>
</span><span id="BidsArchitecture.create_database-359"><a href="#BidsArchitecture.create_database-359"><span class="linenos">359</span></a>            <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="BidsArchitecture.create_database-360"><a href="#BidsArchitecture.create_database-360"><span class="linenos">360</span></a>                <span class="k">continue</span>
</span><span id="BidsArchitecture.create_database-361"><a href="#BidsArchitecture.create_database-361"><span class="linenos">361</span></a>
</span><span id="BidsArchitecture.create_database-362"><a href="#BidsArchitecture.create_database-362"><span class="linenos">362</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="BidsArchitecture.create_database-363"><a href="#BidsArchitecture.create_database-363"><span class="linenos">363</span></a>                <span class="n">validate_bids_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture.create_database-364"><a href="#BidsArchitecture.create_database-364"><span class="linenos">364</span></a>                <span class="n">entities</span> <span class="o">=</span> <span class="n">parse_bids_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="BidsArchitecture.create_database-365"><a href="#BidsArchitecture.create_database-365"><span class="linenos">365</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_file_to_database</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span id="BidsArchitecture.create_database-366"><a href="#BidsArchitecture.create_database-366"><span class="linenos">366</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="BidsArchitecture.create_database-367"><a href="#BidsArchitecture.create_database-367"><span class="linenos">367</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_add_error_to_log</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">error_flags</span><span class="p">)</span>
</span><span id="BidsArchitecture.create_database-368"><a href="#BidsArchitecture.create_database-368"><span class="linenos">368</span></a>
</span><span id="BidsArchitecture.create_database-369"><a href="#BidsArchitecture.create_database-369"><span class="linenos">369</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_dataframes</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">error_flags</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Scan filesystem and build DataFrame of matching files.</p>

<p>Walks through the BIDS directory structure and creates two DataFrames:
one for valid files and one for errors encountered during scanning.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>tuple[pd.DataFrame, pd.DataFrame]: Tuple containing
                                     (database, error_log)</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>ValueError:</strong>  If root directory is not set.</li>
</ul>
</div>


                            </div>
                            <div id="BidsArchitecture.print_errors_log" class="classattr">
                                        <input id="BidsArchitecture.print_errors_log-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_errors_log</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="BidsArchitecture.print_errors_log-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.print_errors_log"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.print_errors_log-437"><a href="#BidsArchitecture.print_errors_log-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="nf">print_errors_log</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BidsArchitecture.print_errors_log-438"><a href="#BidsArchitecture.print_errors_log-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Print summary of errors encountered during database creation.</span>
</span><span id="BidsArchitecture.print_errors_log-439"><a href="#BidsArchitecture.print_errors_log-439"><span class="linenos">439</span></a>
</span><span id="BidsArchitecture.print_errors_log-440"><a href="#BidsArchitecture.print_errors_log-440"><span class="linenos">440</span></a><span class="sd">        Displays the number of files with errors and the types of errors</span>
</span><span id="BidsArchitecture.print_errors_log-441"><a href="#BidsArchitecture.print_errors_log-441"><span class="linenos">441</span></a><span class="sd">        encountered.</span>
</span><span id="BidsArchitecture.print_errors_log-442"><a href="#BidsArchitecture.print_errors_log-442"><span class="linenos">442</span></a><span class="sd">        If no errors were found, prints a confirmation message.</span>
</span><span id="BidsArchitecture.print_errors_log-443"><a href="#BidsArchitecture.print_errors_log-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.print_errors_log-444"><a href="#BidsArchitecture.print_errors_log-444"><span class="linenos">444</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
</span><span id="BidsArchitecture.print_errors_log-445"><a href="#BidsArchitecture.print_errors_log-445"><span class="linenos">445</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No errors found&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture.print_errors_log-446"><a href="#BidsArchitecture.print_errors_log-446"><span class="linenos">446</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture.print_errors_log-447"><a href="#BidsArchitecture.print_errors_log-447"><span class="linenos">447</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BidsArchitecture.print_errors_log-448"><a href="#BidsArchitecture.print_errors_log-448"><span class="linenos">448</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error types: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s1">&#39;error_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Print summary of errors encountered during database creation.</p>

<p>Displays the number of files with errors and the types of errors
encountered.
If no errors were found, prints a confirmation message.</p>
</div>


                            </div>
                            <div id="BidsArchitecture.select" class="classattr">
                                        <input id="BidsArchitecture.select-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">select</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#BidsArchitecture">BidsArchitecture</a></span>:</span></span>

                <label class="view-source-button" for="BidsArchitecture.select-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.select"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.select-633"><a href="#BidsArchitecture.select-633"><span class="linenos">633</span></a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span>
</span><span id="BidsArchitecture.select-634"><a href="#BidsArchitecture.select-634"><span class="linenos">634</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BidsArchitecture.select-635"><a href="#BidsArchitecture.select-635"><span class="linenos">635</span></a>        <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BidsArchitecture.select-636"><a href="#BidsArchitecture.select-636"><span class="linenos">636</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BidsArchitecture.select-637"><a href="#BidsArchitecture.select-637"><span class="linenos">637</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture.select-638"><a href="#BidsArchitecture.select-638"><span class="linenos">638</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Select files from database based on BIDS entities.</span>
</span><span id="BidsArchitecture.select-639"><a href="#BidsArchitecture.select-639"><span class="linenos">639</span></a>
</span><span id="BidsArchitecture.select-640"><a href="#BidsArchitecture.select-640"><span class="linenos">640</span></a><span class="sd">        It select files from the database based on the BIDS entities provided.</span>
</span><span id="BidsArchitecture.select-641"><a href="#BidsArchitecture.select-641"><span class="linenos">641</span></a><span class="sd">        The selection can be done with wildcards or ranges.</span>
</span><span id="BidsArchitecture.select-642"><a href="#BidsArchitecture.select-642"><span class="linenos">642</span></a>
</span><span id="BidsArchitecture.select-643"><a href="#BidsArchitecture.select-643"><span class="linenos">643</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture.select-644"><a href="#BidsArchitecture.select-644"><span class="linenos">644</span></a><span class="sd">            inplace: If True, modify the current instance. If False,</span>
</span><span id="BidsArchitecture.select-645"><a href="#BidsArchitecture.select-645"><span class="linenos">645</span></a><span class="sd">                     return a new instance.</span>
</span><span id="BidsArchitecture.select-646"><a href="#BidsArchitecture.select-646"><span class="linenos">646</span></a><span class="sd">            **kwargs: BIDS entities to filter by (</span>
</span><span id="BidsArchitecture.select-647"><a href="#BidsArchitecture.select-647"><span class="linenos">647</span></a><span class="sd">                      e.g., subject=&#39;01&#39;, session=&#39;1&#39;).</span>
</span><span id="BidsArchitecture.select-648"><a href="#BidsArchitecture.select-648"><span class="linenos">648</span></a>
</span><span id="BidsArchitecture.select-649"><a href="#BidsArchitecture.select-649"><span class="linenos">649</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture.select-650"><a href="#BidsArchitecture.select-650"><span class="linenos">650</span></a><span class="sd">            BidsArchitecture: Filtered instance containing only matching files.</span>
</span><span id="BidsArchitecture.select-651"><a href="#BidsArchitecture.select-651"><span class="linenos">651</span></a>
</span><span id="BidsArchitecture.select-652"><a href="#BidsArchitecture.select-652"><span class="linenos">652</span></a><span class="sd">        Example 1:</span>
</span><span id="BidsArchitecture.select-653"><a href="#BidsArchitecture.select-653"><span class="linenos">653</span></a><span class="sd">            &gt;&gt;&gt; bids = BidsArchitecture(</span>
</span><span id="BidsArchitecture.select-654"><a href="#BidsArchitecture.select-654"><span class="linenos">654</span></a><span class="sd">            ...     &quot;path/to/data&quot;</span>
</span><span id="BidsArchitecture.select-655"><a href="#BidsArchitecture.select-655"><span class="linenos">655</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.select-656"><a href="#BidsArchitecture.select-656"><span class="linenos">656</span></a><span class="sd">            &gt;&gt;&gt; subset = bids.select(</span>
</span><span id="BidsArchitecture.select-657"><a href="#BidsArchitecture.select-657"><span class="linenos">657</span></a><span class="sd">            ...     subject=&quot;01&quot;,</span>
</span><span id="BidsArchitecture.select-658"><a href="#BidsArchitecture.select-658"><span class="linenos">658</span></a><span class="sd">            ...     session=&quot;1&quot;,</span>
</span><span id="BidsArchitecture.select-659"><a href="#BidsArchitecture.select-659"><span class="linenos">659</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.select-660"><a href="#BidsArchitecture.select-660"><span class="linenos">660</span></a>
</span><span id="BidsArchitecture.select-661"><a href="#BidsArchitecture.select-661"><span class="linenos">661</span></a><span class="sd">        Example 2:</span>
</span><span id="BidsArchitecture.select-662"><a href="#BidsArchitecture.select-662"><span class="linenos">662</span></a><span class="sd">            It is possible to select multiple subjects at once:</span>
</span><span id="BidsArchitecture.select-663"><a href="#BidsArchitecture.select-663"><span class="linenos">663</span></a><span class="sd">            &gt;&gt;&gt; subset = (</span>
</span><span id="BidsArchitecture.select-664"><a href="#BidsArchitecture.select-664"><span class="linenos">664</span></a><span class="sd">            ...     bids.select(</span>
</span><span id="BidsArchitecture.select-665"><a href="#BidsArchitecture.select-665"><span class="linenos">665</span></a><span class="sd">            ...         subject=[</span>
</span><span id="BidsArchitecture.select-666"><a href="#BidsArchitecture.select-666"><span class="linenos">666</span></a><span class="sd">            ...             &quot;01&quot;,</span>
</span><span id="BidsArchitecture.select-667"><a href="#BidsArchitecture.select-667"><span class="linenos">667</span></a><span class="sd">            ...             &quot;02&quot;,</span>
</span><span id="BidsArchitecture.select-668"><a href="#BidsArchitecture.select-668"><span class="linenos">668</span></a><span class="sd">            ...         ]</span>
</span><span id="BidsArchitecture.select-669"><a href="#BidsArchitecture.select-669"><span class="linenos">669</span></a><span class="sd">            ...     )</span>
</span><span id="BidsArchitecture.select-670"><a href="#BidsArchitecture.select-670"><span class="linenos">670</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.select-671"><a href="#BidsArchitecture.select-671"><span class="linenos">671</span></a>
</span><span id="BidsArchitecture.select-672"><a href="#BidsArchitecture.select-672"><span class="linenos">672</span></a><span class="sd">        Example 3:</span>
</span><span id="BidsArchitecture.select-673"><a href="#BidsArchitecture.select-673"><span class="linenos">673</span></a><span class="sd">            If we don&#39;t know the exact session number, we can use a wildcard</span>
</span><span id="BidsArchitecture.select-674"><a href="#BidsArchitecture.select-674"><span class="linenos">674</span></a><span class="sd">            with a `-` to tell we want from session 1 to the maximum number of</span>
</span><span id="BidsArchitecture.select-675"><a href="#BidsArchitecture.select-675"><span class="linenos">675</span></a><span class="sd">            sessions:</span>
</span><span id="BidsArchitecture.select-676"><a href="#BidsArchitecture.select-676"><span class="linenos">676</span></a><span class="sd">            &gt;&gt;&gt; subset = bids.select(</span>
</span><span id="BidsArchitecture.select-677"><a href="#BidsArchitecture.select-677"><span class="linenos">677</span></a><span class="sd">            ...     session=&quot;1-*&quot;</span>
</span><span id="BidsArchitecture.select-678"><a href="#BidsArchitecture.select-678"><span class="linenos">678</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.select-679"><a href="#BidsArchitecture.select-679"><span class="linenos">679</span></a>
</span><span id="BidsArchitecture.select-680"><a href="#BidsArchitecture.select-680"><span class="linenos">680</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.select-681"><a href="#BidsArchitecture.select-681"><span class="linenos">681</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_mask</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</span><span id="BidsArchitecture.select-682"><a href="#BidsArchitecture.select-682"><span class="linenos">682</span></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
</span><span id="BidsArchitecture.select-683"><a href="#BidsArchitecture.select-683"><span class="linenos">683</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture.select-684"><a href="#BidsArchitecture.select-684"><span class="linenos">684</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="BidsArchitecture.select-685"><a href="#BidsArchitecture.select-685"><span class="linenos">685</span></a>
</span><span id="BidsArchitecture.select-686"><a href="#BidsArchitecture.select-686"><span class="linenos">686</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BidsArchitecture.select-687"><a href="#BidsArchitecture.select-687"><span class="linenos">687</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">mask</span><span class="p">):</span>
</span><span id="BidsArchitecture.select-688"><a href="#BidsArchitecture.select-688"><span class="linenos">688</span></a>            <span class="n">new_database</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</span><span id="BidsArchitecture.select-689"><a href="#BidsArchitecture.select-689"><span class="linenos">689</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BidsArchitecture.select-690"><a href="#BidsArchitecture.select-690"><span class="linenos">690</span></a>            <span class="n">new_database</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
</span><span id="BidsArchitecture.select-691"><a href="#BidsArchitecture.select-691"><span class="linenos">691</span></a>
</span><span id="BidsArchitecture.select-692"><a href="#BidsArchitecture.select-692"><span class="linenos">692</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">new_instance</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="n">new_database</span><span class="p">)</span>
</span><span id="BidsArchitecture.select-693"><a href="#BidsArchitecture.select-693"><span class="linenos">693</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span></pre></div>


            <div class="docstring"><p>Select files from database based on BIDS entities.</p>

<p>It select files from the database based on the BIDS entities provided.
The selection can be done with wildcards or ranges.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>inplace:</strong>  If True, modify the current instance. If False,
return a new instance.</li>
<li><strong>**kwargs:</strong>  BIDS entities to filter by (
e.g., subject='01', session='1').</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>BidsArchitecture: Filtered instance containing only matching files.</p>
</blockquote>

<p>Example 1:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>bids = BidsArchitecture(
          ...     "path/to/data"
          ... )
      subset = bids.select(
          ...     subject="01",
          ...     session="1",
          ... )</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>Example 2:
    It is possible to select multiple subjects at once:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>subset = (
          ...     bids.select(
          ...         subject=[
          ...             "01",
          ...             "02",
          ...         ]
          ...     )
          ... )</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>Example 3:
    If we don't know the exact session number, we can use a wildcard
    with a <code>-</code> to tell we want from session 1 to the maximum number of
    sessions:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>subset = bids.select(
          ...     session="1-*"
          ... )</p>
    </blockquote>
  </blockquote>
</blockquote>
</div>


                            </div>
                            <div id="BidsArchitecture.remove" class="classattr">
                                        <input id="BidsArchitecture.remove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#BidsArchitecture">BidsArchitecture</a></span>:</span></span>

                <label class="view-source-button" for="BidsArchitecture.remove-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BidsArchitecture.remove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BidsArchitecture.remove-695"><a href="#BidsArchitecture.remove-695"><span class="linenos">695</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span>
</span><span id="BidsArchitecture.remove-696"><a href="#BidsArchitecture.remove-696"><span class="linenos">696</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">inplace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="BidsArchitecture.remove-697"><a href="#BidsArchitecture.remove-697"><span class="linenos">697</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BidsArchitecture&quot;</span><span class="p">:</span>
</span><span id="BidsArchitecture.remove-698"><a href="#BidsArchitecture.remove-698"><span class="linenos">698</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove files from database based on BIDS entities.</span>
</span><span id="BidsArchitecture.remove-699"><a href="#BidsArchitecture.remove-699"><span class="linenos">699</span></a>
</span><span id="BidsArchitecture.remove-700"><a href="#BidsArchitecture.remove-700"><span class="linenos">700</span></a><span class="sd">        Args:</span>
</span><span id="BidsArchitecture.remove-701"><a href="#BidsArchitecture.remove-701"><span class="linenos">701</span></a><span class="sd">            inplace: If True, modify the current instance.</span>
</span><span id="BidsArchitecture.remove-702"><a href="#BidsArchitecture.remove-702"><span class="linenos">702</span></a><span class="sd">                     If False, return a new instance.</span>
</span><span id="BidsArchitecture.remove-703"><a href="#BidsArchitecture.remove-703"><span class="linenos">703</span></a><span class="sd">            **kwargs: BIDS entities to filter by for removal.</span>
</span><span id="BidsArchitecture.remove-704"><a href="#BidsArchitecture.remove-704"><span class="linenos">704</span></a>
</span><span id="BidsArchitecture.remove-705"><a href="#BidsArchitecture.remove-705"><span class="linenos">705</span></a><span class="sd">        Returns:</span>
</span><span id="BidsArchitecture.remove-706"><a href="#BidsArchitecture.remove-706"><span class="linenos">706</span></a><span class="sd">            BidsArchitecture: Instance with specified files removed.</span>
</span><span id="BidsArchitecture.remove-707"><a href="#BidsArchitecture.remove-707"><span class="linenos">707</span></a>
</span><span id="BidsArchitecture.remove-708"><a href="#BidsArchitecture.remove-708"><span class="linenos">708</span></a><span class="sd">        Examples:</span>
</span><span id="BidsArchitecture.remove-709"><a href="#BidsArchitecture.remove-709"><span class="linenos">709</span></a><span class="sd">            &gt;&gt;&gt; bids = BidsArchitecture(</span>
</span><span id="BidsArchitecture.remove-710"><a href="#BidsArchitecture.remove-710"><span class="linenos">710</span></a><span class="sd">            ...     &quot;path/to/data&quot;</span>
</span><span id="BidsArchitecture.remove-711"><a href="#BidsArchitecture.remove-711"><span class="linenos">711</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.remove-712"><a href="#BidsArchitecture.remove-712"><span class="linenos">712</span></a><span class="sd">            &gt;&gt;&gt; # Remove all files for subject &#39;01&#39;</span>
</span><span id="BidsArchitecture.remove-713"><a href="#BidsArchitecture.remove-713"><span class="linenos">713</span></a><span class="sd">            &gt;&gt;&gt; filtered = (</span>
</span><span id="BidsArchitecture.remove-714"><a href="#BidsArchitecture.remove-714"><span class="linenos">714</span></a><span class="sd">            ...     bids.remove(</span>
</span><span id="BidsArchitecture.remove-715"><a href="#BidsArchitecture.remove-715"><span class="linenos">715</span></a><span class="sd">            ...         subject=&quot;01&quot;</span>
</span><span id="BidsArchitecture.remove-716"><a href="#BidsArchitecture.remove-716"><span class="linenos">716</span></a><span class="sd">            ...     )</span>
</span><span id="BidsArchitecture.remove-717"><a href="#BidsArchitecture.remove-717"><span class="linenos">717</span></a><span class="sd">            ... )</span>
</span><span id="BidsArchitecture.remove-718"><a href="#BidsArchitecture.remove-718"><span class="linenos">718</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BidsArchitecture.remove-719"><a href="#BidsArchitecture.remove-719"><span class="linenos">719</span></a>        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_mask</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="BidsArchitecture.remove-720"><a href="#BidsArchitecture.remove-720"><span class="linenos">720</span></a>        <span class="k">if</span> <span class="n">inplace</span><span class="p">:</span>
</span><span id="BidsArchitecture.remove-721"><a href="#BidsArchitecture.remove-721"><span class="linenos">721</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture.remove-722"><a href="#BidsArchitecture.remove-722"><span class="linenos">722</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="BidsArchitecture.remove-723"><a href="#BidsArchitecture.remove-723"><span class="linenos">723</span></a>
</span><span id="BidsArchitecture.remove-724"><a href="#BidsArchitecture.remove-724"><span class="linenos">724</span></a>        <span class="n">new_instance</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BidsArchitecture.remove-725"><a href="#BidsArchitecture.remove-725"><span class="linenos">725</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">new_instance</span><span class="p">,</span> <span class="s2">&quot;_database&quot;</span><span class="p">,</span> <span class="n">new_instance</span><span class="o">.</span><span class="n">_database</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])</span>
</span><span id="BidsArchitecture.remove-726"><a href="#BidsArchitecture.remove-726"><span class="linenos">726</span></a>        <span class="k">return</span> <span class="n">new_instance</span>
</span></pre></div>


            <div class="docstring"><p>Remove files from database based on BIDS entities.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>inplace:</strong>  If True, modify the current instance.
If False, return a new instance.</li>
<li><strong>**kwargs:</strong>  BIDS entities to filter by for removal.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>BidsArchitecture: Instance with specified files removed.</p>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bids</span> <span class="o">=</span> <span class="n">BidsArchitecture</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;path/to/data&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Remove all files for subject &#39;01&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filtered</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">bids</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;01&quot;</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
</code></pre>
  </div>
</blockquote>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>